"use strict";var globalModoDespligeApp=0,IsyplusApp=angular.module("isyplus",["ui.router","ngMask","ui.grid","ui.grid.edit","ui.grid.selection","ui.grid.autoResize","ui.grid.cellNav","ui.grid.pinning","ui.grid.resizeColumns","ngResource","ngDraggable","ngFileUpload"]);!function(){function a(a){a.interceptors.push("AnimHttpInterceptor"),toastr.options={timeOut:"4000",positionClass:"toast-bottom-right"}}angular.module("isyplus").config(a),a.$inject=["$httpProvider"]}(),function(){function a(a,b,c){function d(a){return a.each(function(){$("html, body").animate({scrollTop:$(a).offset().top},900)})}a.$on("loading:progress",function(){b.show(!0)}),a.$on("loading:finish",function(){b.show(!1)}),a.$on("$stateChangeSuccess",function(a,b,c,e,f){try{d($("#app_bar"))}catch(g){}})}angular.module("isyplus").run(a),a.$inject=["$rootScope","ajaxAnimService","sideBarService"]}(),function(){function a(a,b,c,d,e,f){function g(){d.initGrid(m),m.gridOptions.rowTemplate=j(),i()}function h(){b.go("auts_form")}function i(){var a=c.get(function(){200===a.estado&&(m.gridOptions.columnDefs=a.cols,m.gridOptions.data=a.items)})}function j(){return'<div ng-dblclick="grid.appScope.rowDblClick(row)"  ng-repeat="(colRenderIndex, col) in colContainer.renderedColumns track by col.colDef.name" class="ui-grid-cell"  ng-class="{ \'ui-grid-row-header-cell\': col.isRowHeader }"  ui-grid-cell></div>'}function k(){e.show("modalDetallesAuts")}function l(a,b){f.limpiaMarca(m.gridOptions.data),a.marcado?a.marcado=!1:a.marcado=!0;var c=f.getFirstMarcado(m.gridOptions.data);null!=c?m.selectedItem=c:m.selectedItem=null}var m=a;m.selectedItem={},m.setupgrid={pag:!0},m.setupgrid.checks={hideColumncheck:!0},m.crear=h,m.listar=i,m.onRowClick=l,g(),m.rowDblClick=function(a){m.selectedItem=a.entity,k()}}angular.module("isyplus").controller("AutorizacionCntrl",a),a.$inject=["$scope","$state","AutorizacionServ","gridService","ModalServ","ListasServ"]}(),function(){function a(a){a.state("auts_list",{url:"/autorizacion",templateUrl:"static/app/autorizacion/autorizacion.list.html?v="+globalgsvapp,controller:"AutorizacionCntrl"})}angular.module("isyplus").config(a),a.$inject=["$stateProvider"]}(),function(){function a(a){return a("/rest/autorizacion/:aut_id",{aut_id:"@aut_id"},{getForm:{method:"GET",params:{accion:"form"}},getFormStep:{method:"GET",params:{accion:"justform"}},getContribAuts:{method:"GET",params:{accion:"contribauts"}},getByNumAndRuc:{method:"GET",params:{accion:"findbyrucnum"}}})}angular.module("isyplus").factory("AutorizacionServ",a),a.$inject=["$resource"]}(),function(){function a(a,b,c,d,e,f){function g(){var a=c.get({aut_id:0},function(){200==a.estado&&(l.form=a.form,l.listas.contributentes=a.contribs,l.listas.tiposdoc=a.tiposdoc)});e.setFocus("contrib",500)}function h(){var a=c.save(l.form,function(){200===a.estado&&(d.success(a.msg),b.go("auts_list"))})}function i(a){a&&(l.form.cnt_id=a.cnt_id,e.setFocus("aut_estab",100))}function j(){b.go("auts_list")}function k(){var a=f.sumar_anios(l.form.aut_fechaautorizacion,1);l.form.aut_fechacaducidad=a}var l=a;l.form={},l.contribsel={},l.listas={contributentes:[],tiposdoc:[]},l.guardar=h,l.cancelar=j,l.onContribSel=i,l.onenterfecha=k,g()}angular.module("isyplus").controller("AutorizacionFormCntrl",a),a.$inject=["$scope","$state","AutorizacionServ","NotifServ","focusService","FechasServ"]}(),function(){function a(a){a.state("auts_form",{url:"/autorizacion/form",templateUrl:"static/app/autorizacion/form/autorizacion.form.html?v="+globalgsvapp,controller:"AutorizacionFormCntrl"})}angular.module("isyplus").config(a),a.$inject=["$stateProvider"]}(),function(){function a(a,b,c,d,e,f){function g(){n.gridOptions.rowTemplate=h(),j()}function h(){return'<div ng-dblclick="grid.appScope.rowDblClick(row)"  ng-repeat="(colRenderIndex, col) in colContainer.renderedColumns track by col.colDef.name" class="ui-grid-cell" ng-class="{ \'ui-grid-row-header-cell\': col.isRowHeader }"  ui-grid-cell></div>'}function i(){b.go("contribs_form",{cnt_id:n.selectedItem.cnt_id})}function j(){var a=c.get(function(){200===a.estado&&(n.gridOptions.columnDefs=a.cols,n.gridOptions.data=a.items)})}function k(){b.go("contribs_form",{cnt_id:0})}function l(){e.show("modalDetallesContrib")}function m(a,b){f.limpiaMarca(n.gridOptions.data),a.marcado?a.marcado=!1:a.marcado=!0;var c=f.getFirstMarcado(n.gridOptions.data);null!=c?n.selectedItem=c:n.selectedItem=null}var n=a;n.selectedItem={},d.initGrid(n),n.crear=k,n.listar=j,n.editar=i,n.showModalDetalles=l,n.setupgrid={pag:!0},n.setupgrid.checks={hideColumncheck:!0},n.onRowClick=m,g(),n.rowDblClick=function(a){n.selectedItem=a.entity,l()}}angular.module("isyplus").controller("ContribCntrl",a),a.$inject=["$scope","$state","ContribuyenteServ","gridService","ModalServ","ListasServ"]}(),function(){function a(a){a.state("contribs_list",{url:"/contribuyentes",templateUrl:"static/app/contribuyente/contribuyente.list.html?v="+globalgsvapp,controller:"ContribCntrl"})}angular.module("isyplus").config(a),a.$inject=["$stateProvider"]}(),function(){function a(a){return a("/rest/contribuyente/:cnt_id",{cnt_id:"@cnt_id"},{getForm:{method:"GET",params:{accion:"form"}},findByRuc:{method:"GET",params:{accion:"find"}}})}angular.module("isyplus").factory("ContribuyenteServ",a),a.$inject=["$resource"]}(),function(){function a(a,b,c,d,e,f){function g(){var a=e.getForm({cnt_id:c.cnt_id},function(){200===a.estado&&(o.form=a.form,o.tiposcontrib=a.tiposcontrib)});d.setFocus("cnt_ruc",500)}function h(){var a=e.save(o.form,function(){200===a.estado&&(f.success(a.msg),j())})}function i(){b.go("contribs_list")}function j(){b.go("contribs_list")}function k(){o.isEnterPress=!0,n()}function l(){o.isEnterPress||n()}function m(a){d.setFocus(a)}function n(){if(console.log("checkExistContrib-->"),console.log(o.form.cnt_id),console.log(o.form.cnt_id>0),0===o.form.cnt_id){if(o.form.cnt_ruc.length>10&&0===o.form.cnt_id)var a=e.findByRuc({ruc:o.form.cnt_ruc},function(){200===a.estado?(f.warning("El contribuyente ya esta registrado"),o.form=a.contrib,o.existeContrib=!0):404===a.estado&&(f.info("El contribuyente no está registrado"),d.setFocus("cnt_razonsocial",100))})}else console.log("Ya no se chequea si contribuyetne exites--->")}var o=a;o.form={cnt_id:0},o.tiposcontrib=[],o.existeContrib=!1,o.isEnterPress=!1,g(),o.guardar=h,o.cancelar=i,o.onEnterPress=k,o.onBlurRuc=l,o.setFocusField=m,o.checkExistContrib=n}angular.module("isyplus").controller("ContribFormCntrl",a),a.$inject=["$scope","$state","$stateParams","focusService","ContribuyenteServ","NotifServ"]}(),function(){function a(a){a.state("contribs_form",{url:"/contribuyentes/form/:cnt_id",templateUrl:"static/app/contribuyente/form/contribs.form.html?v="+globalgsvapp,controller:"ContribFormCntrl"})}angular.module("isyplus").config(a),a.$inject=["$stateProvider"]}(),function(){function a(a){a.state("empresa",{url:"/empresa/",templateUrl:"static/app/empresa/empresa.html?v="+globalgsvapp,controller:"EmpresaCntrl"})}angular.module("isyplus").config(a),a.$inject=["$stateProvider"]}(),function(){function a(a,b,c,d){function e(){var a=c.save(i.form,function(){200===a.estado&&(b.success(a.msg),h())})}function f(){d.go("home")}function g(){h()}function h(){var a=c.get({emp_id:0},function(){a.tempresa&&(i.form=a.tempresa,0===i.form.emp_id?b.warning("El establecimiento grafico, no ha sido parametrizado"):b.warning("El establecimiento grafico, ya ha sido parametrizado"))})}var i=a;i.form={emp_id:0},i.guardar=e,i.canclear=f,g()}angular.module("isyplus").controller("EmpresaCntrl",a),a.$inject=["$scope","NotifServ","EmpresaServ","$state"]}(),function(){function a(a){return a("/rest/tempresa/:emp_id",{emp_id:"@emp_id"},{})}angular.module("isyplus").factory("EmpresaServ",a),a.$inject=["$resource"]}(),function(){function a(a){a.state("home",{url:"/home/",templateUrl:"static/app/home/home.html?v="+globalgsvapp,controller:"HomeCntrl"})}angular.module("isyplus").config(a),a.$inject=["$stateProvider"]}(),function(){function a(a,b,c,d){function e(){console.log("HomeCntrl----->"),console.log("valor de globalUserLogged:"),console.log(globalUserLogged),c.loadRolesUser(globalUserLogged),d(function(){console.log("roles cargado son");var a=c.getRolesUserList();console.log(a)},5e3)}e()}angular.module("isyplus").controller("HomeCntrl",a),a.$inject=["$scope","$state","AuthFactory","$timeout"]}(),function(){function a(a,b,c,d,e){function f(){console.log("InitCntrl ejecutado ----->")}function g(){b.go("home")}function h(){b.go("login")}function i(){b.go("usuarios")}function j(){b.go("empresa")}function k(){b.go("contribs_list")}function l(){b.go("auts_list")}function m(){b.go("job_list")}function n(){b.go("reportes_list")}function o(){b.go("job_step")}var p=a;p.isUsserLogged=!1,p.exitApp=g,p.goFormIngreso=h,p.goUsuarios=i,p.goEmpresa=j,p.goContribs=k,p.goAuts=l,p.goJobs=m,p.goReportes=n,p.goJobWizard=o,f()}angular.module("isyplus").controller("InitCntrl",a),a.$inject=["$scope","$state","LoginServ","NotifServ","AuthFactory"]}(),function(){function a(a,b,c,d,e,f,g,h){function i(){var a=b.job_id,c=d.getForm({job_id:a},function(){200===c.estado&&(p.form=c.form,p.listas.contributentes=c.contribs,g.setFocus("ruccontrib",500))})}function j(){var a=e.getContribAuts({cnt_id:p.contribsel.cnt_id},function(){200==a.estado&&(p.listas.auts=a.items,g.setFocus("aut_id",100))})}function k(){var a=d.save(p.form,function(){200===a.estado&&(f.success(a.msg),n())})}function l(a){a&&(p.form.cnt_id=a.cnt_id,g.setFocus("aut_estab",100),p.contribsel=a,j())}function m(){var a=h.buscarObjeto(p.listas.auts,"aut_id",p.form.aut_id);p.autsel=a}function n(){c.go("job_list")}function o(){n()}var p=a;p.form={},p.contribsel={},p.listas={contributentes:[],auts:[]},p.autsel=void 0,p.guardar=k,p.cancelar=o,p.onContribSel=l,p.onAutChange=m,i()}angular.module("isyplus").controller("JobFormCntrl",a),a.$inject=["$scope","$stateParams","$state","JobService","AutorizacionServ","NotifServ","focusService","ListasServ"]}(),function(){function a(a){a.state("job_form",{url:"/job/form/:job_id",templateUrl:"static/app/job/form/job.form.html?v="+globalgsvapp,controller:"JobFormCntrl"})}angular.module("isyplus").config(a),a.$inject=["$stateProvider"]}(),function(){function a(a,b,c,d,e,f,g,h,i){function j(){c.initGrid(D),D.gridOptions.rowTemplate=n(),l()}function k(){d.go("job_step")}function l(){var a=b.get(function(){200===a.estado&&(D.gridOptions.columnDefs=a.cols,D.gridOptions.data=a.items)})}function m(){d.go("job_upload")}function n(){return'<div ng-dblclick="grid.appScope.rowDblClick(row)"  ng-repeat="(colRenderIndex, col) in colContainer.renderedColumns track by col.colDef.name" class="ui-grid-cell" ng-class="{ \'ui-grid-row-header-cell\': col.isRowHeader }"  ui-grid-cell></div>'}function o(){e.show("modalDetallesJob")}function p(){e.hide("modalDetallesJob")}function q(a,c){var d={job_id:D.selectedItem.job_id,newestado:a},e=b.cambiarEstado(d,function(){200===e.estado&&(c&&f.success(e.msg),l())})}function r(a){g.confirm("¿Esta seguro?",function(c){if(c)var d={job_id:D.selectedItem.job_id,newestado:a},e=b.cambiarEstado(d,function(){200===e.estado&&(f.success(e.msg),p(),l())})},"Cambiar estado del pedido")}function s(){var b=h.get(function(){200===b.status&&(a.repgrid.columnDefs=b.cols,a.repgrid.data=b.items),e.show("modalSelPlant")})}function t(a){D.repgrid.selectedItem=a}function u(a,b){console.log("doc to print"),console.log(b),D.selectedReport=a,C(a),q(6)}function v(){console.log(D.repgrid.selectedItem);var a=b.putPlantilla({job_id:D.selectedItem.job_id,temp_id:D.repgrid.selectedItem.temp_id},function(){200==a.estado&&(f.success(a.msg),e.hide("modalSelPlant"))})}function w(){r(2)}function x(){alert("reimprimir")}function y(a){d.go("job_view",{job_id:a})}function z(a,b){i.limpiaMarca(D.gridOptions.data),a.marcado?a.marcado=!1:a.marcado=!0;var c=i.getFirstMarcado(D.gridOptions.data);null!=c?D.selectedItem=c:D.selectedItem=null}function A(){e.show("modalSelTipoPrint")}function B(){y(D.selectedItem.job_id)}function C(a){var b=D.repgrid.selectedItem.temp_id,c=D.selectedItem.aut_secuencia_ini,d=D.selectedItem.aut_secuencia_fin,e=D.selectedItem.job_id,f="http://localhost:8080/imprentas_war/ReporteServlet?desde="+c+"&hasta="+d+"&codrep="+b+"&tipocopia="+a+"&jobid="+e;console.log("url-->"),console.log(f),window.open(f,"mywindow","status=1,toolbar=1")}var D=a;D.selectedItem={},D.selectedReport=0,D.crear=k,D.listar=l,D.cambiarEstado=r,D.setPlantilla=s,D.aceptarModal=v,D.imprimir=C,D.selectPlantilla=t,D.selectDocToPrint=u,D.showModalImprmir=A,D.reportar=w,D.reimprimir=x,D.onRowClick=z,D.testUpload=m,D.verDetalles=B,D.repgrid={},D.repgrid.selectedItem={},j();var E=[{headerName:"Make",field:"make"},{headerName:"Model",field:"model"},{headerName:"Price",field:"price"}],F=[{make:"Toyota",model:"Celica",price:35e3},{make:"Ford",model:"Mondeo",price:32e3},{make:"Porsche",model:"Boxter",price:72e3}];a.gridOptions2={columnDefs:E,rowData:F},D.rowDblClick=function(a){D.selectedItem=a.entity,o()}}angular.module("isyplus").controller("JobCntrl",a),a.$inject=["$scope","JobService","gridService","$state","ModalServ","NotifServ","swalService","ReportesServ","ListasServ"]}(),function(){function a(a){a.state("job_list",{url:"/job",templateUrl:"static/app/job/job.list.html?v="+globalgsvapp,controller:"JobCntrl"})}angular.module("isyplus").config(a),a.$inject=["$stateProvider"]}(),function(){function a(a){return a("/rest/job/:job_id",{job_id:"@job_id"},{getForm:{method:"GET",params:{accion:"form"}},getJustForm:{method:"GET",params:{accion:"justform"}},getAllInfo:{method:"GET",params:{accion:"getall"}},cambiarEstado:{method:"POST",params:{accion:"cambiar_estado"}},putPlantilla:{method:"POST",params:{accion:"put_reporte"}}})}angular.module("isyplus").factory("JobService",a),a.$inject=["$resource"]}(),function(){function a(a){return a("/rest/jobrp/:jobrp_id",{jobrp_id:"@jobrp_id"},{})}angular.module("isyplus").factory("JobRPService",a),a.$inject=["$resource"]}(),function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(){console.log("init jobsteps-->"),E.currentStep=1,o()}function o(){var a=k.getForm({cnt_id:0},function(){200===a.estado&&(E.formContrib=a.form,E.tiposcontrib=a.tiposcontrib)});l.setFocus("cnt_ruc",500)}function p(){r()}function q(){t()}function r(){var a=m.getFormStep({aut_id:0,cnt_id:E.formContrib.cnt_id},function(){if(200==a.estado){E.formAut=a.form,E.listas.tiposdoc=a.tiposdoc,l.setFocus("aut_numero",100);var b=m.getContribAuts({cnt_id:E.formContrib.cnt_id},function(){200==b.estado&&(E.autsContribList=b.items)})}})}function s(){if(console.log("buscar autorizacion--->"),E.formAut.aut_numero.length>5)var a=m.getByNumAndRuc({cnt_ruc:E.formContrib.cnt_ruc,aut_numero:E.formAut.aut_numero},function(){console.log("Respuesta del servidor es"),console.log(a),200===a.estado&&(E.formAut=a.aut),l.setFocus("aut_serie",100)})}function t(){var a=0,c=b.getJustForm({job_id:a},function(){200===c.estado&&(E.formJob=c.form,l.setFocus("job_ptoemi"))})}function u(){w()}function v(){console.log("on onFocusContribRazonSocial-->"),E.contribFinded||w()}function w(){if(E.contribFinded=!0,E.formContrib.cnt_ruc.length>10)var a=k.findByRuc({ruc:E.formContrib.cnt_ruc},function(){200===a.estado?(f.info("El contribuyente ya esta registrado"),E.formContrib=a.contrib,E.existeContrib=!0):404===a.estado&&(f.info("El contribuyente no está registrado"),l.setFocus("cnt_razonsocial",100))})}function x(){var a=k.save(E.formContrib,function(){if(200===a.estado){var b=a.cnt_id;E.formContrib.cnt_id=b,E.currentStep=2,p()}})}function y(){var a=m.save(E.formAut,function(){if(200===a.estado){var b=a.aut_id;console.log("aut_id generado:"),console.log(b);var c=m.get({aut_id:b},function(){console.log("res2 es:"),console.log(c),200===c.estado&&(console.log("form generado es"),console.log(c.form),E.formAutSaved=c.form,console.log("formaut save es:"),console.log(E.formAutSaved))});E.currentStep=3,q()}})}function z(){E.formJob.aut_id=E.formAutSaved.aut_id,E.formJob.cnt_id=E.formContrib.cnt_id,console.log("Dats enviados"),console.log(E.formJob);var a=b.save(E.formJob,function(){if(200===a.estado){var b=a.job_id;f.success(a.msg),D(b)}})}function A(){f.info("back action->")}function B(){var a=j.sumar_anios(E.formAut.aut_fechaautorizacion,1);E.formAut.aut_fechacaducidad=a}function C(a){l.setFocus(a)}function D(a){d.go("job_view",{job_id:a})}var E=a;E.currentStep=1,E.formContrib={},E.formAut={},E.formAutSaved={},E.formJob={},E.tiposcontrib=[],E.autsContribList=[],E.listas={tiposdoc:[]},E.existeContrib=!1,E.contribFinded=!1,E.onEnterFindContrib=u,E.onFocusContribRazonSocial=v,E.findContrib=w,E.guardarContrib=x,E.guardarAutorizacion=y,E.guardarJob=z,E.onenterfecha=B,E.anterior=A,E.setInputFocus=C,E.buscarAutorizacion=s,n()}angular.module("isyplus").controller("JobStepsCntrl",a),a.$inject=["$scope","JobService","gridService","$state","ModalServ","NotifServ","swalService","ReportesServ","ListasServ","FechasServ","ContribuyenteServ","focusService","AutorizacionServ"]}(),function(){function a(a){a.state("job_step",{url:"/jobsteps",templateUrl:"static/app/job/jobsteps/jobsteps.html?v="+globalgsvapp,controller:"JobStepsCntrl"})}angular.module("isyplus").config(a),a.$inject=["$stateProvider"]}(),function(){function a(a,b,c,d){function e(){console.log("init up cntrl--->")}function f(){console.log("Se ejecuta submit"),console.log("vm.upload_form"),console.log(h.upload_form),console.log(h.upload_form.file.$valid&&h.file),h.upload_form.file.$valid&&h.file&&g(h.file)}function g(a){c.upload({url:"http://localhost:6543/uploadjobview",data:{file:a,job_id:0,nombreArchivo:"pruebaNombreArchivo",filename:"pruebafilename"}}).then(function(a){console.log("Respuesta del servidor"),console.log(a),200===a.data.estado?d.success(a.data.msg):a.data.estado===-1&&d.warning(a.data.msg)},function(a){console.log("Error status: "+a.status),b.alert("Error status: "+a.status),d.error(a.status)},function(a){var b=parseInt(100*a.loaded/a.total);console.log("progress: "+b+"% "+a.config.data.file.name),h.progress="progress: "+b+"% "})}var h=a;h.submit=f,h.upload=g,e()}angular.module("isyplus").controller("JobUpCntrl",a),a.$inject=["$scope","$window","Upload","swalService"]}(),function(){function a(a){a.state("job_upload",{url:"/jobupload",templateUrl:"static/app/job/jobuploaddoc/jobjup.html?v="+globalgsvapp,controller:"JobUpCntrl"})}angular.module("isyplus").config(a),a.$inject=["$stateProvider"]}(),function(){function a(a,b,c,d,e,f,g,h,i,j,k){function l(){console.log("init JobViewCntrl"),m()}function m(){var a=b.job_id,c=d.getAllInfo({job_id:a},function(){console.log("respuesta del servidor es"),console.log(c),200===c.estado&&(H.formJob=c.form_job,H.formAut=c.form_aut,H.formContrib=c.form_contrib)})}function n(a){e.setFocus(a)}function o(){c.go("job_list")}function p(){z("¿Seguro que desea anular el documento?",4)}function q(){D()}function r(){i.show("modalCargaManual")}function s(){w()}function t(){z("¿Esta seguro?",2)}function u(){var a=2;C(a),y(6,!1)}function v(){console.log("vista previa-->");var a=1;C(a),H.isVistaPrevia=!0}function w(){H.formReprint={jobrp_id:0,job_id:H.formJob.job_id,jobrp_obs:"",jobrp_secini:"",jobrp_secfin:""},i.show("modalReprint")}function x(){console.log(H.formReprint);var a=j.save(H.formReprint,function(){200==a.estado&&(C(1),f.success(a.msg),i.hide("modalReprint"),y(5))})}function y(a,b){var c={job_id:H.formJob.job_id,newestado:a},e=d.cambiarEstado(c,function(){200===e.estado&&(b&&f.success(e.msg),m())})}function z(a,b){h.confirm(a,function(a){if(a)var c={job_id:H.formJob.job_id,newestado:b},e=d.cambiarEstado(c,function(){200===e.estado&&(f.success(e.msg),m())})},"Cambiar estado del documento")}function A(a){H.repgrid.selectedItem=a}function B(){console.log(H.repgrid.selectedItem);var a=d.putPlantilla({job_id:H.formJob.job_id,temp_id:H.repgrid.selectedItem.temp_id},function(){200==a.estado&&(f.success(a.msg),i.hide("modalSelPlant"),y(7))})}function C(a){console.log("tipocopia"),console.log(a);var b=H.formJob.temp_id,c=H.formJob.job_secuencia_ini,d=H.formJob.job_secuencia_fin,e=H.formJob.job_id,f="http://localhost:8080/imprentas_war/ReporteServlet?desde="+c+"&hasta="+d+"&codrep="+b+"&tipocopia="+a+"&jobid="+e;console.log("url-->"),console.log(f),window.open(f,"mywindow","status=1,toolbar=1")}function D(){var a=g.get(function(){200===a.status&&(H.repgrid.columnDefs=a.cols,H.repgrid.data=a.items,m()),i.show("modalSelPlant")})}function E(){z("¿Seguro que desea marcar como incompleto este documento?",3)}function F(){console.log("Se ejecuta submit"),console.log("vm.upload_form"),console.log(H.upload_form),console.log(H.upload_form.file.$valid&&H.file),H.upload_form.file.$valid&&H.file&&G(H.file)}function G(a){k.upload({url:"http://localhost:6543/uploadjobview",data:{file:a,job_id:H.formJob.job_id,nombreArchivo:"pruebaNombreArchivo",filename:"pruebafilename"}}).then(function(a){console.log("Respuesta del servidor"),console.log(a),200===a.data.estado?(h.success(a.data.msg),y(6,!1),i.hide("modalCargaManual")):a.data.estado===-1&&h.warning(a.data.msg)},function(a){console.log("Error status: "+a.status),h.error("Error status: "+a.status)},function(a){var b=parseInt(100*a.loaded/a.total);console.log("progress: "+b+"% "+a.config.data.file.name),H.progress="progress: "+b+"% "})}var H=a;H.formContrib={},H.formAut={},H.formJob={},H.formReprint={jobrp_id:0},H.isVistaPrevia=!1,H.repgrid={},H.repgrid.selectedItem={},H.submit=F,H.upload=G,H.anular=p,H.plantilla=q,H.cargaManual=r,H.reimprimir=s,H.reportar=t,H.goLista=o,H.okModalSelPlantilla=B,H.selectPlantilla=A,H.vistaPrevia=v,H.imprimir=u,H.setInputFocus=n,H.okModalReimprimir=x,H.marcarIncompleto=E,l()}angular.module("isyplus").controller("JobViewCntrl",a),a.$inject=["$scope","$stateParams","$state","JobService","focusService","NotifServ","ReportesServ","swalService","ModalServ","JobRPService","Upload"]}(),function(){function a(a){a.state("job_view",{url:"/jobview/:job_id",templateUrl:"static/app/job/jobview/job.view.html?v="+globalgsvapp,controller:"JobViewCntrl"})}angular.module("isyplus").config(a),a.$inject=["$stateProvider"]}(),function(){function a(a){function b(){return f}function c(a){f=a}function d(b){var c=a.getRolesUser({us_id:b},function(){console.log("valor de res es:"),console.log(c),200===c.estado&&(g=c.roles)})}function e(){return g}var f=!1,g=[];return{isUserLogged:b,setUserLogged:c,loadRolesUser:d,getRolesUserList:e}}angular.module("isyplus").factory("AuthFactory",a),a.$inject=["RolesServ"]}(),function(){function a(a){a.state("login",{url:"/login",templateUrl:"static/app/login/login.html?v="+globalgsvapp,controller:"LoginCntrl"})}angular.module("isyplus").config(a),a.$inject=["$stateProvider"]}(),function(){function a(a,b,c,d){function e(){console.log("Init login cntrl"),h.form={usuario:"",clave:""}}function f(){console.log("Se ejecuta el metodo de autenticacion-->");var a=c.save(h.form,function(){200==a.estado&&(a.resultado?(d.info("Login exitoso"),b.go("home")):d.error("Login fallido"))})}function g(){console.log("Se ejecuta checkUserStatus-->");var a=c.chkStatus(function(){console.log("Valor de res es:"),console.log(a),a.userloged?d.info("Usuario en sesion"):d.error("Usuario no esta en sesion")})}var h=a;h.form={},h.autenticar=f,h.checkUserStatus=g,e()}angular.module("isyplus").controller("LoginCntrl",a),a.$inject=["$scope","$state","LoginServ","NotifServ"]}(),function(){function a(a){return a("/rest/usuarios/:us_id",{us_id:"@us_id"},{chkStatus:{method:"GET",params:{accion:"chkstatus"}},listar:{method:"GET",params:{accion:"listar"}},getForm:{method:"GET",params:{accion:"form"}},crearUsuario:{method:"POST",params:{accion:"crear"}},resetClave:{method:"POST",params:{accion:"resetclave"}},cambiarEstado:{method:"POST",params:{accion:"cestado"}}})}angular.module("isyplus").factory("LoginServ",a),a.$inject=["$resource"]}(),function(){function a(a,b,c,d){function e(){console.log("Reportes Cntrl Init executed-->"),f()}function f(){console.log("Se ejecuta accion listar");var c=b.get(function(){200===c.status&&(a.gridOptions.columnDefs=c.cols,a.gridOptions.data=c.items)})}function g(){d.go("upload",{temp_id:0})}function h(){d.go("upload",{temp_id:i.selectedItem.temp_id})}var i=a;i.listar=f,i.crear=g,i.editar=h,i.selectedItem={},c.initGrid(i),e()}angular.module("isyplus").controller("ReportesCntrl",a),a.$inject=["$scope","ReportesServ","gridService","$state"]}(),function(){function a(a){a.state("reportes_list",{url:"/reportes",templateUrl:"static/app/reportes/reportes.list.html?v="+globalgsvapp,controller:"ReportesCntrl"})}angular.module("isyplus").config(a),a.$inject=["$stateProvider"]}(),function(){function a(a){return a("/rest/plantillas/:temp_id",{temp_id:"@temp_id"},{})}angular.module("isyplus").factory("ReportesServ",a),a.$inject=["$resource"]}(),function(){function a(a){a.state("upload",{url:"/upload/:temp_id",templateUrl:"static/app/uploadfile/upload.html?v="+globalgsvapp,controller:"UploadCntrl"})}angular.module("isyplus").config(a),a.$inject=["$stateProvider"]}(),function(){function a(a,b,c,d,e){function f(){var a=d.temp_id,b=parseInt(a,10);if(console.log(b),0==b)h.form={temp_id:0,temp_name:""};else var c=e.get({temp_id:a},function(){200==c.status&&(h.form=c.form)})}function g(){c.go("reportes_list")}var h=a;h.form={nombreArchivo:"prueba"},f(),h.cancelar=g}angular.module("isyplus").controller("UploadCntrl",a),a.$inject=["$scope","NotifServ","$state","$stateParams","ReportesServ"]}(),function(){function a(a,b,c,d,e,f,g){function h(){i()}function i(){switch(n.accion=c.accion,n.accion){case"c":n.titulo="Creación de usuario";break;case"e":n.titulo="Actualización de usuario";break;case"r":n.titulo="Reseteo de clave";break;default:n.titulo="Creación de usuario"}if(parseInt(c.userid)>0)var a=e.get({us_id:c.userid},function(){200==a.estado&&(n.form=a.user)});else var a=e.getForm(function(){200==a.estado&&(n.form=a.form)});"r"===n.accion?f.setFocusTimeout("claveTempInput",500):(f.setFocusTimeout("nomApelUser",500),"c"!=n.accion&&"e"!=n.accion||k())}function j(){if(0===n.form.us_id){n.form.roles=n.matrizRoles;var a=e.crearUsuario(n.form,function(){200==a.estado&&(d.success(a.msg),l())})}else if("r"===n.accion)var a=e.resetClave(n.form,function(){200===a.estado&&(d.success(a.msg),l())});else{n.form.roles=n.matrizRoles;var a=e.save(n.form,function(){200===a.estado&&(d.success(a.msg),l())})}}function k(){n.matrizRoles=[],n.form.us_id=c.userid;var a=g.get(n.form,function(){console.log("respuesta del servidor es:"),200==a.estado&&(n.matrizRoles=a.matriz)})}function l(){b.go("usuarios")}function m(){l()}var n=a;n.form={us_id:0},n.guardar=j,n.cancelar=m,n.accion="c",n.titulo="Creación de usuario",n.matrizRoles=[],h()}angular.module("isyplus").controller("UserFormCntrl",a),a.$inject=["$scope","$state","$stateParams","NotifServ","LoginServ","focusService","RolesServ"]}(),function(){function a(a){a.state("usuarios_form",{url:"/usuarios/:userid/:accion",templateUrl:"static/app/usuarios/form/users.form.html?v="+globalgsvapp,controller:"UserFormCntrl"})}angular.module("isyplus").config(a),a.$inject=["$stateProvider"]}(),function(){function a(a){return a("/rest/userroles/:us_id",{us_id:"@us_id"},{getRolesUser:{method:"GET",params:{accion:"getrolesu"}}})}angular.module("isyplus").factory("RolesServ",a),a.$inject=["$resource"]}(),function(){function a(a,b,c,d,e,f){function g(){h()}function h(){var b=d.listar(function(){200===b.estado&&(a.gridOptions.columnDefs=b.cols,a.gridOptions.data=b.items)})}function i(){b.go("usuarios_form",{userid:0,accion:"c"})}function j(){b.go("usuarios_form",{userid:m.selectedItem.us_id,accion:"e"})}function k(){b.go("usuarios_form",{userid:m.selectedItem.us_id,accion:"r"})}function l(){var a="¿Seguro que desea dar de baja este usuario?";if(1===m.selectedItem.us_status&&(a="¿Seguro que desea activar este usuario?"),confirm(a))var b=d.cambiarEstado(m.selectedItem,function(){200===b.estado&&(e.success(b.msg),h())})}var m=a;m.items=[],m.listar=h,m.crear=i,m.editar=j,m.resetearClave=k,m.cambiarEstado=l,m.selectedItem={},f.initGrid(m),g()}angular.module("isyplus").controller("UsuariosCntrl",a),a.$inject=["$scope","$state","$transitions","LoginServ","NotifServ","gridService"]}(),function(){function a(a){a.state("usuarios",{url:"/usuarios",templateUrl:"static/app/usuarios/usuarios.html?v="+globalgsvapp,controller:"UsuariosCntrl"})}angular.module("isyplus").config(a),a.$inject=["$stateProvider"]}(),function(a){function b(a,b,c,d,e,f,g){function h(){try{a.uri=a.baseuri+"&"+$.param(a.uriparams),console.log("Valor para uri es"),console.log(a.uri)}catch(b){console.error("Error al tratar de setear uri",b)}}function i(){if(a.secciones=[],a.uriparams&&1===a.uriparams.is_sec_codigo)var b=f.getAll(function(){1===b.estado&&(a.secciones=b.seccionesls,k())})}function j(){a.tipoArtSel=e.buscarObjeto(a.tiposartlist,"tar_codigo",a.uriparams.tar_codigo)}function k(){a.seccionSel=e.buscarObjeto(a.secciones,"sec_codigo",a.uriparams.sec_codigo)}function l(){i(),h(),c.config(a)}function m(){var b=a.uriparams.tra_codigo;if(b)var c=g.getClaSesionTransac({tra_codigo:b},function(){if(200===c.estado){var b=c.cla_sesion_transac;for(var d in b)a.uriparams[d]=b[d];h()}})}function n(){var b=a.uriparams.tra_codigo;if(b)var c=g.saveClaSesionTransac({tra_codigo:b,setup:a.uriparams},function(){console.log("Resultado de actualizar en sesion trasac",c)})}var o="Digite el nombre del articulo";a.tipoArtSel={},a.placeh=a.placeh||o,a.secciones=[],a.seccionSel={},a.uri="",a.setModuBus=function(b){a.uriparams.modo=b,d.setFocusWithTimeout(a.idprop,100),a.placeh="byid"===b?"Digite el código del artículo":o,h(),n()},a.changeSecCodigo=function(b){a.seccionSel=b,a.uriparams.sec_codigo=b.sec_codigo,d.setFocusWithTimeout(a.idprop,100),h(),n()},a.changeTarCodigo=function(b){a.uriparams.tar_codigo=b.tar_codigo,a.uriparams.tipo=b.tipo,d.setFocusWithTimeout(a.idprop,100),h(),n()},a.clearArtSel=function(){a.model={};try{b(function(){a.fnOnNull(a.filtro)}),d.setFocusWithTimeout(a.idprop,100)}catch(c){console.error(" Error al ejecutar función ")}},a.onkeydown=function(b){c.onkeydown(a,b)},a.onkeyup=function(b){c.onkeyup(a,b)},a.sel_item=function(b){c.sel_item(a,b)},a.on_lost_focus=function(b){c.on_lost_focus(a)},a.$watch("model",function(b,d){c.on_model_change(a)}),a.$watch("baseuri",function(b,d){c.on_uri_change(a),h()}),a.$watch("uriparams.tar_codigo",function(a,b){console.log("watch property uriparams.tar_codigo--->",a),a&&j()}),a.$watch("uriparams.is_sec_codigo",function(a,b){console.log("watch property uriparams.is_sec_codigo--->",a),a&&i()}),a.$watch("uriparams.tra_codigo",function(a,b){console.log("watch property uriparams.tra_codigo--->",a),a&&m()}),a.$watch("uriparams.sec_codopu",function(a,b){a&&(console.log("Cambia valor para uriparams.sec_codopu, nuevo valor es:",a),h())}),l()}a.controller("BusArtDirectCntrl",b),b.$inject=["$scope","$timeout","BaseAutocompServ","GeneralSrv","ListasServ","tseccionRest","tclaveRest"]}(IsyplusApp),function(a){function b(){return{restrict:"EA",scope:{tipo:"@",data:"=?",model:"=",setup:"=",baseuri:"=",uriparams:"=?",tiposartlist:"=",disabled:"=",placeh:"@"},controller:"BusArtDirectCntrl",templateUrl:"static/components/articulos/buscarArtDirect/buscarArtDirect.html?v="+globalgsvapp}}a.directive("buscarArtDirect",b)}(IsyplusApp),function(){function a(a,b){b.config(a),a.onkeydown=function(c){b.onkeydown(a,c)},a.onkeyup=function(c){b.onkeyup(a,c)},a.sel_item=function(c){b.sel_item(a,c)},a.on_lost_focus=function(c){b.on_lost_focus(a)},a.$watch("model",function(c,d){b.on_model_change(a)})}angular.module("isyplus").controller("BusRetDirectCntrl",a),a.$inject=["$scope","BaseAutocompServ"]}(),function(){function a(){return{restrict:"EA",scope:{tipo:"@",data:"=",model:"=",setup:"=",disabled:"="},controller:"BusRetDirectCntrl",templateUrl:"static/components/articulos/buscarRetDirect/buscarRetDirect.html?v="+globalgsvapp}}angular.module("isyplus").directive("buscarRetDirect",a)}(),function(a){function b(a,b){function c(){d.tracodigo||(d.tracodigo=0),a(function(){if(d.uriParams={modo:"bynom",tra_codigo:d.tracodigo,
tar_codigo:1,tra_tiplis:0,tipo:"arts"},d.uri="/rest/transacc/articulos?search",d.elementId){var a=b.find("input");a.attr("id",d.elementId)}},500)}var d=this;d.uri="",d.uriParams={},d.model={},d.disabled=!1,d.modobus="bynom",d.tarcodigodef=1,d.tiposartlist=[{tar_codigo:1,tar_descri:"COMERCIAL",tipo:"arts"}],d.setup={propFiltro:"art_nomlar",propFiltroId:"art_id",idprop:d.elementId,colornull:"#FF0000",fnOnSel:d.onItemSel,showClearBtn:1},c()}a.controller("ServiBuscaArtCntrl",b),b.$inject=["$timeout","$element"]}(IsyplusApp),function(){function a(){var a={restrict:"EA",templateUrl:"static/components/articulos/serviBuscaArt/serviBuscaArt.html?v="+globalgsvapp,scope:!0,bindToController:{itemsel:"=",onItemSel:"=",tracodigo:"=",elementId:"@"},controller:"ServiBuscaArtCntrl",controllerAs:"cntrl"};return a}angular.module("isyplus").directive("serviBuscaArt",a)}(),function(){function a(a,b,c,d,e){function f(){m.artCodequiv>0&&(g(),i(),h())}function g(){var a=b.getForm(function(){200===a.estado&&(m.form=a.form,m.form.art_codequiv=m.artCodequiv)})}function h(){m.parents=a.listarParents({art_codequiv:m.artCodequiv},function(){})}function i(){var b=a.getInfoArticulo({aue_codigo:m.artCodequiv},function(){200===b.estado&&(m.infoArtEquiv=b.infoart)})}function j(){var b=a.getInfoArticulo({aue_codigo:m.parentSel.art_codigo},function(){200===b.estado&&(m.infoArtParent=b.infoart,m.form.art_codigo=m.parentSel.art_codigo,m.form.art_cantequiv=m.parentSel.art_cantequiv,k())})}function k(){m.form.nuevoStock=0;var a=Number(m.form.cantidad)*Number(m.parentSel.art_cantequiv);m.form.childCantEquiv=a;try{m.form.cantidad&&(m.form.nuevoStock=Number(m.infoArtEquiv.ars_exist)+a)}catch(b){console.log("Error al calcular nuevo stock",b)}}function l(){c.confirm("",function(a){if(a)var c=b.save({art_codigo:0,form:m.form,parent:m.infoArtParent,child:m.infoArtEquiv},function(){200===c.estado&&(e.hide(m.elementid),toastr.success(c.msg))})})}var m=this;m.form={},m.parents=[],m.parentSel={},m.infoArtParent={},m.infoArtEquiv={},m.loadParents=h,m.loadInfoArtEquiv=i,m.loadInfoArtParent=j,m.calcularNuevoStock=k,m.grabar=l,f(),d.$on("changeConversionArtCodigoEvent",function(a,b){m.artCodequiv=b,f()})}angular.module("isyplus").controller("ServiConversionArtController",a),a.$inject=["tartuniequiv","converArtService","swalService","$scope","ModalServ"]}(),function(){function a(){var a={restrict:"EA",templateUrl:"static/components/articulos/serviConversionArt/serviConversionArt.html?v="+globalgsvapp,scope:!0,bindToController:{elementid:"@",artCodequiv:"="},controller:"ServiConversionArtController",controllerAs:"cntrl"};return a}angular.module("isyplus").directive("serviConversionArt",a)}(),function(){function a(a){return a("/rest/articulos/conversion/:art_codigo",{art_codigo:"@art_codigo"},{getForm:{method:"GET",params:{accion:"form"}}})}angular.module("isyplus").factory("converArtService",a),a.$inject=["$resource"]}(),function(){function a(a,b){a.read_file=function(){a.form.progress=0,a.form.name=a.file.name,a.form.size=a.file.size,a.form.type=a.file.type,b.readAsDataUrl(a.file,a).then(function(b){a.form.src=b})},a.clear_file=function(){a.form={progress:0,name:"",size:"",type:"",src:""}}}angular.module("isyplus").controller("CargaArchivoCntrl",a),a.$inject=["$scope","CustomFileReader"]}(),function(){function a(){return{restrict:"EA",replace:!0,scope:{form:"=",mxsize:"@"},link:function(a,b){b.bind("change",function(b){a.file=(b.srcElement||b.target).files[0];var c=a.file.size,d=!0;if(a.form.mxsize&&(a.mxsize=a.form.mxsize),a.mxsize){var e=c/1024;e>a.mxsize&&(d=!1,alert("!El tamaño del archivo ("+Math.round(e)+"kb) sobrepasa el tamaño máximo permitido ("+a.mxsize+"kb), no se puede cargar!"))}d?a.read_file():a.clear_file()})},controller:"CargaArchivoCntrl",template:"<input type='file' class='subir' style='width:100%'/>"}}angular.module("isyplus").directive("cargaArchivoDir",a)}(),function(){function a(a,b){a.quitar_imagen=function(){console.log("quitar imagen");var c={};angular.copy(a.form,c),a.form={progress:0,name:"",size:"",type:"",src:""},b(function(){for(var b in c)console.log(b),"src"===b||(a.form[b]=c[b])},400)}}angular.module("isyplus").controller("PropiedadAdcDirCntrl",a),a.$inject=["$scope","$timeout"]}(),function(){function a(){return{restrict:"EA",replace:!1,scope:{form:"=",fnvisiblegendescri:"=",fndisabled:"=",fnchange:"="},controller:"PropiedadAdcDirCntrl",templateUrl:"static/components/camposadc/propiedadAdcDir/propiedadAdcDir.html?v="+globalgsvapp}}angular.module("isyplus").directive("propiedadAdcDir",a)}(),function(){function a(){return{restrict:"EA",replace:!1,scope:{categorias:"=",classpanel:"=",fnvisible:"=",fndisabled:"=",fnchange:"="},controller:function(){},templateUrl:"static/components/camposadc/propiedadesAdcDir/propiedadesAdcDir.html?v="+globalgsvapp}}angular.module("isyplus").directive("propiedadesAdcDir",a)}(),function(){function a(){return function(a){return"T"===a?"ACTIVO":"INACTIVO"}}angular.module("isyplus").filter("estadoFilter",a)}(),function(){function a(){return function(a,b){var c=moment(moment().format("DD/MM/YYYY"),"DD/MM/YYYY"),d=moment(a,"ddd, DD MMM YYYY HH:mm:ss Z"),e=moment(d.format("DD/MM/YYYY"),"DD/MM/YYYY"),f="HH:mm",g="DD MMM",h=c.diff(e,"days");return b?d.format("DD MMM, HH:mm:ss a "):0==h?d.format(f):d.format(g)}}angular.module("isyplus").filter("gmailFechaFilter",a)}(),function(){function a(){return function(a){return a?a.replace(/<.+@.+>/,""):a}}angular.module("isyplus").filter("gmailFromFilter",a)}(),function(){function a(){return function(a){return 0===a?"NO":"SI"}}angular.module("isyplus").filter("hasValueFilter",a)}(),function(){function a(){return function(a){return 0===a?"ABIERTO":1===a?"CERRADO":2===a?"BLOQUEADO":void 0}}angular.module("isyplus").filter("openFilter",a)}(),function(){function a(){return function(a){if(!a)return a;var b=moment(moment().format("DD/MM/YYYY"),"DD/MM/YYYY"),c=moment(a,"DD/MM/YYYY HH:mm"),d=moment(c.format("DD/MM/YYYY"),"DD/MM/YYYY"),e="HH:mm",f="DD MMM HH:mm",g=b.diff(d,"days");return 0==g?c.format(e):c.format(f)}}angular.module("isyplus").filter("revisadoFechaFilter",a)}(),function(){function a(){return function(a,b){return a.slice(b)}}angular.module("isyplus").filter("startFrom",a)}(),function(){function a(a,b,c,d,e){a.celebrantes=[],a.celebrantesselecs=[],a.filtro_celebrante={},a.current_celb_codigo=0,a.celb_nvo={},a.celb_edit={},a.estilorow="celebrante.celb_estado===1?{'background-color': '#CCCCCC'}:'' ",a.inicializavars=function(){c.getCelebrante(0,a)},a.load_celebrantes=function(){c.load_celebrantes(a)},a.sel_celebrante=function(c){if(0===c.celb_estado)if(a.selecvarios){var e=-1;c.sel=!c.sel;for(var f in a.celebrantesselecs)if(a.celebrantesselecs[f].celb_codigo===c.celb_codigo){e=f;break}c.sel?e===-1&&a.celebrantesselecs.push(c):a.celebrantesselecs.splice(e,1)}else a.$emit("on_celebrante_sel",{celebrante:c,otro:"otro"}),b.hide(a.elementid);else d.info("Celebrante deshabilitado","INFORMACIÓN")},a.$on("show_modal_celebrante",function(c,d){console.log("show_modal_celebrante event----------------->"),console.log(d),$("#"+a.elementid).off("show.bs.modal"),$("#"+a.elementid).off("shown.bs.modal"),$("#"+a.elementid).off("hide.bs.modal"),a.current_celb_codigo=d.current||0,a.selecvarios=d.selecvarios||!1,a.celebrantesselecs=d.celebrantesselecs||[],a.celb_estado=d.celb_estado,a.onhide=d.onhide||!1,a.onhide&&b.onHide(a.elementid,function(b){a.onhide()}),b.onShow(a.elementid,function(b){a.load_celebrantes(),a.inicializavars()}),b.onShown(a.elementid,function(a){$("#celebrante_filter").focus()}),b.show(a.elementid)}),a.cambiaEstado=function(){a.celb_estado=0===a.celb_estado?1:0,c.load_celebrantes(a)},a.guardarCelebrante=function(b,d){d.$valid?c.guardarCelebrante(b.celb_codigo,b).then(function(b){0!==b.data.estado&&(a.inicializavars(),c.load_celebrantes(a))}):console.log("debe ingresar un nombre")},a.cancelar=function(){a.inicializavars()},a.limpiar=function(){a.inicializavars()},a.cambiarestadoCelebrante=function(b,e){var f=0==e?"HABILITAR":"DESHABILITAR";d.confirm("USTED VA A "+f+" EL CELEBRANTE: "+b.celb_nombre+" , ¿DESEA PROSEGUIR?",function(d){d&&c.cambiarestadoCelebrante(b.celb_codigo,e).then(function(b){0!==b.data.estado&&c.load_celebrantes(a)})})},a.asignar_celb_edit=function(b){a.celb_edit=angular.copy(b),e(function(){$("#nomcelebrante").focus()})}}angular.module("isyplus").controller("ModalCelebrantesDirCntrl",a),a.$inject=["$scope","ModalServ","ModalCelebrantesService","AlertSrv","$timeout"]}(),function(){function a(){return{restrict:"AE",scope:{elementid:"@"},controller:"ModalCelebrantesDirCntrl",templateUrl:"static/components/modal/modalCelebrantesDir/modalCelebrantesDir.html?v="+globalgsvapp}}angular.module("isyplus").directive("modalCelebrantesDir",a)}(),function(){function a(a){this.load_celebrantes=function(b){console.log("carga celebrantes");var c="/rest/celebrante/lsceleb";0===b.celb_estado&&(c=c+"?byestado="+b.celb_estado),a.get(c).then(function(a){if(a.data.lstcelebrantes){b.celebrantes=a.data.lstcelebrantes;for(var c in b.celebrantesselecs)for(var d in b.celebrantes)b.celebrantesselecs[c].celb_codigo===b.celebrantes[d].celb_codigo&&(b.celebrantes[d].sel=!0);if(0!=b.current_celb_codigo)for(var d in b.celebrantes)if(b.celebrantes[d].celb_codigo===b.current_celb_codigo){b.celebrantes[d].sel=!0;break}}})},this.cambiarestadoCelebrante=function(b,c){var d="/rest/celebrante/lsceleb/"+b+"?opc=cambiarestado&estado="+c;return a.post(d)},this.guardarCelebrante=function(b,c){var d=b||0;return a.post("/rest/celebrante/lsceleb/"+d,c)},this.getCelebrante=function(b,c){console.log("entra obtener celebrante"),a.get("/rest/celebrante/lsceleb/"+b).then(function(a){c.celb_nvo=a.data.celebrante,c.celb_edit=a.data.celebrante})}}angular.module("isyplus").service("ModalCelebrantesService",a),a.$inject=["$http"]}(),function(){function a(a,b,c){a.datos={},a.adicionales=[],a.show_modal=function(){c.show(a.elementid)},a.load_datos_articulo=function(){var c=this;b.get("/rest/transacc/articulo/"+a.artcodigo+"?tipo="+a.tipo_arts).then(function(b){b.data.articulo?(a.datos=b.data.articulo,a.adicionales=b.data.adicionales,c.show_modal()):alert("Error al tratar de obtener los detalles del artículo")})},a.$on("show_modal_detalles_art_event",function(b,c){a.artcodigo=c.art_codigo,a.tipo_arts=c.tipo_arts,a.load_datos_articulo()})}angular.module("isyplus").controller("ModalDetallesArtCntrl",a),a.$inject=["$scope","$http","ModalServ"]}(),function(){function a(){return{restrict:"AE",scope:{elementid:"@"},controller:"ModalDetallesArtCntrl",templateUrl:"static/components/modal/modalDetallesArt/modalDetallesArt.html?v="+globalgsvapp}}angular.module("isyplus").directive("modalDetallesArt",a)}(),function(){function a(a,b,c){a.proyectos=[],a.proyectosselecs=[],a.filtro_proy={},a.current_pry_codigo=0,a.load_proyectos=function(){c.load_proyectos(a)},a.sel_proyecto=function(c){if(a.selecvarios){var d=-1;c.sel=!c.sel;for(var e in a.proyectosselecs)if(a.proyectosselecs[e].pry_codigo===c.pry_codigo){d=e;break}c.sel?d===-1&&a.proyectosselecs.push(c):a.proyectosselecs.splice(d,1)}else a.$emit("on_centrocosto_sel",{proyecto:c,otro:"otro"}),b.hide(a.elementid)},a.$on("show_modal_centrocosto",function(c,d){console.log("show_modal_centrocosto event----------------->"),console.log(d),$("#"+a.elementid).off("show.bs.modal"),$("#"+a.elementid).off("shown.bs.modal"),$("#"+a.elementid).off("hide.bs.modal"),a.current_pry_codigo=d.current||0,a.selecvarios=d.selecvarios||!1,a.proyectosselecs=d.proyectosselecs||[],a.pry_estado=d.pry_estado,a.onhide=d.onhide||!1,a.onhide&&b.onHide(a.elementid,function(b){a.onhide()}),b.onShow(a.elementid,function(b){a.load_proyectos()}),b.onShown(a.elementid,function(a){$("#centro_costo_filter").focus()}),b.show(a.elementid)}),a.cambiaEstado=function(){a.pry_estado=0===a.pry_estado?1:0,c.load_proyectos(a)}}angular.module("isyplus").controller("ModalProyectosDirCntrl",a),a.$inject=["$scope","ModalServ","ModalProyectosService"]}(),function(){function a(){return{restrict:"AE",scope:{elementid:"@"},controller:"ModalProyectosDirCntrl",templateUrl:"static/components/modal/modalProyectosDir/modalProyectosDir.html?v="+globalgsvapp}}angular.module("isyplus").directive("modalProyectosDir",a)}(),function(){function a(a){this.load_proyectos=function(b){var c="/rest/tproyectos";0===b.pry_estado&&(c=c+"?byestado="+b.pry_estado),a.get(c).then(function(a){if(a.data.items){b.proyectos=a.data.items,b.session_pry_codigo=a.data.current_pry_codigo;for(var c in b.proyectosselecs)for(var d in b.proyectos)b.proyectosselecs[c].pry_codigo===b.proyectos[d].pry_codigo&&(b.proyectos[d].sel=!0)}}),a.get("/rest/general/0?opc=appconfig").then(function(a){a&&(b.acf_nameproyecto=a.data.acf_nameproyecto)})}}angular.module("isyplus").service("ModalProyectosService",a),a.$inject=["$http"]}(),function(a){function b(a,b,c,d,e,f){function g(){b.get("/rest/creatransacc/"+v.params.pro_codigo+"/"+v.params.tra_codigo_ret+"/0?accion=retencion&tra_codigo_from="+v.params.tra_codigo_from).then(function(a){a.data.ttransacc&&(v.ttransacc=a.data.ttransacc,v.impuestos=a.data.impuestos,v.formDatos=a.data.form_datos,v.formDetalles=a.data.form_detalles,v.formTotales=a.data.form_totales,v.rep_printtype=a.data.rep_printtype,v.se_imprime_transacc=a.data.se_imprime_transacc,v.formDetallesInit={},angular.copy(v.formDetalles,v.formDetallesInit),v.formTotalesInit={},angular.copy(v.formTotales,v.formTotalesInit),a.data.articulos_disp&&(v.tiposRetencion=a.data.articulos_disp),a.data.totales_ant&&(v.totalesAnt=a.data.totales_ant),v.form.isRetencionLoaded=1)})}function h(a){f.setFocus(a,100)}function i(a,b){v.params=b.params,v.datosFactura=b.datosFactura,b.isRetencionLoaded?console.log("Los datos de la retencion ya fueron cargados se muestra modal para edicion de la retencion"):(console.log("Se trae informacion de la transaccion de retencion"),g()),f.setFocus("art_trn_ret",600)}function j(){var a=v.datosFactura.subt||0,b=v.datosFactura.ivaval||0,c=d.filtrar(v.articulos,{ret_calc:1}),e=d.filtrar(v.articulos,{ret_calc:2}),f=d.sumarColumna(c,"dt_precio"),g=d.sumarColumna(e,"dt_precio");return{total_renta:f,total_iva:g,max_renta:a,max_iva:b}}function k(){var a=v.datosFactura.subt||0,b=v.datosFactura.ivaval||0,c=[],e=[];$.each(v.tiposRetencion,function(a,b){a!==v.indexArtEdit&&(1===b.ret_calc?c.push(b):2===b.ret_calc&&e.push(b))});var f=d.sumarColumna(c,"dt_precio"),g=d.sumarColumna(e,"dt_precio");return{total_renta:f,total_iva:g,max_renta:a,max_iva:b}}function l(){var a=j();if(v.isEditando&&(a=k()),0===a.max_renta);else{var b=e.redondear(a.max_iva,2),c=e.redondear(a.max_renta,2),d=a.total_renta,f=a.total_iva,g=2===v.formDetalles.ret_calc,h=v.formDetalles.dt_precio;if(g){var i=e.redondear(Number(f)+Number(h),2);if(e.isNumberAMayorToB(i,b))return alert("El monto total de base imponible ("+i+") no puede sobrepasar el total de iva del comprobante ("+b+")"),!1}else{var l=e.redondear(Number(d)+Number(h),2);if(e.isNumberAMayorToB(l,c))return alert("La monto total de base imponible ("+l+") no puede sobrepasar al subtotal del comprobante ("+c+")"),!1}}return!0}function m(a){for(var b in a)v.formDetalles[b]=a[b];v.formDetalles.dt_cant=1;var c=v.datosFactura.subt||0;2===a.ret_calc&&(c=v.datosFactura.ivaval||0);var d=c*a.ret_valor;v.formDetalles.dt_precio=e.redondear(c,2),v.formDetalles.dt_total=e.redondear(d,2),f.setFocus("base_imponible_ret",200)}function n(a){v.retencionSel.art={},angular.copy(a,v.retencionSel.art),v.formDetalles={},angular.copy(a,v.formDetalles),v.isEditando=!0,v.indexArtEdit=v.articulos.indexOf(a),f.setFocus("base_imponible_ret",200)}function o(){v.formDetalles={},angular.copy(v.formDetallesInit,v.formDetalles),v.formDetalles.dt_observ=""}function p(){var a=l();a?(v.formDetalles.dt_total=e.redondear(Number(v.formDetalles.dt_precio)*Number(v.formDetalles.ret_valor),2),v.articulos[v.indexArtEdit]=v.formDetalles,t(),v.retencionSel.art={},o(),f.setFocus("art_trn_ret",100),v.isEditando=!1,v.indexArtEdit=-1):toastr.warning("No se actualizó")}function q(){v.isEditando?p():s()}function r(a){d.removeItem(v.articulos,a),t()}function s(){var a=l();a?(v.formDetalles.dt_total=e.redondear(Number(v.formDetalles.dt_precio)*Number(v.formDetalles.ret_valor),2),!v.retencionSel.art.art_codigo>0?c(function(){alert("Seleccione la retención"),f.setFocus("art_trn_ret",100)},100):(v.articulos.push(v.formDetalles),t(),v.retencionSel.art={},o(),f.setFocus("art_trn_ret",100))):toastr.warning("No se agregó")}function t(){var a=0,b=0,c=0;angular.forEach(v.articulos,function(a,c){b+=a.dt_total});var d=a+b,f=0,g=0,h=d+f+g+c;v.formTotales.sub12=a,v.formTotales.sub0=b,v.formTotales.subt=d,v.formTotales.ivaval=f,v.formTotales.total=h,v.formTotales.impservval=g,v.formTotales.totalice=c,v.form.dt_valor=e.redondear(h,2)}function u(){v.form.datos_retencion={form_datos:v.formDatos,impuestos:v.impuestos,articulos:v.articulos,pagos:[],form_totales:v.formTotales,listapropsadc:[],rep_printtype:v.rep_printtype,se_imprime_transacc:v.se_imprime_transacc,tra_tippag:v.ttransacc.tra_tippag,tra_codigo:v.ttransacc.tra_codigo},v.fnguardar()}var v=this;v.tiposRetencion=[],v.artsIsLoaded=!1,v.ttransacc={},v.params={},v.datosFactura={},v.retencionSel={},v.retencionSel.art={},v.indexArtEdit=-1,v.isEditando=!1,v.formDetalles={},v.formDetallesInit={},v.formTotales={},v.impuestos={},v.formDatos={},v.formDatosInit={},v.formTotalesInit={},v.rep_printtype=0,v.se_imprime_transacc=0,v.articulos=[],v.onRetencionSel=m,v.editarRetencion=n,v.actualizarRetencion=p,v.quitarRetencion=r,v.agregarRetencion=s,v.setFocus=h,v.agregarActualizarRet=q,v.closeModal=u,a.$on("add_pagoretencion_event",i)}a.controller("ModalRetencionCntrl",b),b.$inject=["$scope","$http","$timeout","ListasServ","NumberServ","focusService"]}(IsyplusApp),function(a){function b(){return{restrict:"EA",replace:!0,templateUrl:"static/components/modal/modalRetencion/modalRetencion.html?v="+globalgsvapp,scope:!0,bindToController:{elementid:"@",form:"=",fnguardar:"&"},controller:"ModalRetencionCntrl",controllerAs:"cntrl"}}a.directive("modalRetencion",b)}(IsyplusApp),function(){function a(a,b,c){a.secciones=[],a.seccionesselecs=[],a.filtro_secc={},a.session_sec_codigo=0,a.load_secciones=function(){c.load_secciones(a)},a.sel_seccion=function(c){if(a.selecvarios){var d=-1;c.sel=!c.sel;for(var e in a.seccionesselecs)if(a.seccionesselecs[e].pry_codigo===c.pry_codigo){d=e;break}c.sel?d===-1&&a.seccionesselecs.push(c):a.seccionesselecs.splice(d,1)}else a.$emit("on_seccion_sel",{seccion:c,otro:"otro"}),b.hide(a.elementid)},a.$on("show_modal_secciones",function(c,d){console.log("show_modal_secciones event----------------->"),console.log(d),$("#"+a.elementid).off("show.bs.modal"),$("#"+a.elementid).off("shown.bs.modal"),$("#"+a.elementid).off("hide.bs.modal"),a.session_sec_codigo=d.current||0,a.selecvarios=d.selecvarios||!1,a.seccionesselecs=d.seccionesselecs||[],a.onhide=d.onhide||!1,a.onhide&&b.onHide(a.elementid,function(b){a.onhide()}),b.onShow(a.elementid,function(b){a.load_secciones()}),b.onShown(a.elementid,function(a){$("#seccion_filter").focus()}),b.show(a.elementid)})}angular.module("isyplus").controller("ModalSeccionesDirCntrl",a),a.$inject=["$scope","ModalServ","ModalSeccionesService"]}(),function(){function a(){return{restrict:"AE",scope:{elementid:"@"},controller:"ModalSeccionesDirCntrl",templateUrl:"static/components/modal/modalSeccionesDir/modalSeccionesDir.html?v="+globalgsvapp}}angular.module("isyplus").directive("modalSeccionesDir",a)}(),function(){function a(a){this.load_secciones=function(b){var c="/rest/tseccion?opc=allsecAndAlm";a.get(c).then(function(a){if(1==a.data.estado){b.secciones=a.data.seccionesls;var c=0,d=0;for(c;c<b.seccionesselecs.length;c++)for(d=0;d<b.secciones.length;d++)b.seccionesselecs[c].sec_codigo===b.secciones[d].sec_codigo&&(b.secciones[d].sel=!0)}}),a.get("/rest/general/0?opc=appconfig").then(function(a){a&&(b.acf_nameproyecto=a.data.acf_nameproyecto)})}}angular.module("isyplus").service("ModalSeccionesService",a),a.$inject=["$http"]}(),function(){function a(a,b,c,d,e,f,g){a.bancos=[],a.banco_sel={},a.cta_contable_sel={},a.ctas_contables=[],a.show_crea_cred=1,a.clp_codigo=0,a.creditos=[],a.cols_creditos=[],a.modal_size="",a.pago_cred_ref_disabled=!1;var h="";a.$watch("cta_contable_sel",function(b,c){if(a.modal_size=" ",a.ttransaccpago){var d=a.form.ttp_signo,e=a.ttransaccpago.tct_codigo;a.show_crea_cred=1,2===e&&1===d?a.show_crea_cred=0:1===e&&d===-1&&(a.show_crea_cred=0),0===a.show_crea_cred?(a.load_creditos(),a.modal_size="modal-lg"):(a.creditos=[],a.cols_creditos=[])}}),a.onMarcaCreditoChange=function(b,c){if(d.limpiarMarcados(a.creditos,{marcado:!0},"marcado"),b.marcado=c,b.marcado){a.form.dt_codcre=b.dt_codigo;var f=e.redondear(b.saldo,2);f>h?a.form.dt_valor=h:a.form.dt_valor=f}},a.onFilaCredClick=function(b){var c=b.marcado||!1;a.onMarcaCreditoChange(b,!c)},a.onChekClick=function(b){var c=b.marcado||!1;a.onMarcaCreditoChange(b,c)},a.load_creditos=function(){if(a.cta_contable_sel.cta_codigo){var b={cta_codigo:a.cta_contable_sel.cta_codigo,clp_codigo:a.clp_codigo,clc_id:a.ttransaccpago.clc_id};c.listar_creditos(b,function(b){b.data.items&&(a.creditos=b.data.items,a.cols_creditos=b.data.cols)})}else a.creditos=[],a.cols_creditos=[]},a.find_cta_contable=function(b){a.form.cta_codigo=b,a.cta_contable_sel={},$.each(a.ctas_contables,function(b,c){console.log(a.form.cta_codigo,c.cta_codigo,a.form.cta_codigo===c.cta_codigo),a.form.cta_codigo===c.cta_codigo&&(a.cta_contable_sel=c)}),0===a.show_crea_cred?a.modal_size="modal-lg":a.modal_size=" "},a.on_cta_contable_change=function(){a.form.cta_codigo=a.cta_contable_sel.cta_codigo,a.form.ttp_signo=a.cta_contable_sel.ttp_signo},a.find_banco=function(){$.each(a.bancos,function(b,c){a.form.tasicredito.cre_codban===c.ban_codigo&&(a.banco_sel=c)})},a.on_banco_change=function(){a.find_banco(),a.form.tasicredito.ban_nombre=a.banco_sel.ban_nombre||""},a.load_bancos=function(){b.listar_por_tipo(2,function(b){b.data.items&&(a.bancos=b.data.items)})},a.load_info_ref=function(){console.log("Valor para clp_codigo es:"),console.log(a.form.clp_codigo);var b=a.form.clp_codigo||0;0!=b&&f.getReferenteNoComps(b).then(function(b){console.log("Info del referente es:"),1==b.data.estado&&g.copyValues(b.data.ref,a.form)})},a.validarPago=function(){var b=!0;0===a.show_crea_cred&&(a.form.dt_codcre&&0!==a.form.dt_codcre||(toastr.error("Debe seleccionar el crédito"),b=!1)),b&&a.fnguardar()},a.$on("add_tasicredito_event",function(b,c){a.ttransaccpago=c.forma_pago_sel;var d=c.cta_codigo_def;a.clp_codigo=c.clp_codigo,a.ctas_contables=a.ttransaccpago.subitems,a.load_bancos(),a.find_cta_contable(d),h=c.totalFactura||0})}angular.module("isyplus").controller("ModalPagoCreditoCntrl",a),a.$inject=["$scope","TBancoServ","CreditosTransaccServ","ListasServ","NumberServ","ReferenteSrv","GeneralSrv"]}(),function(){function a(){return{restrict:"AE",scope:{elementid:"@",form:"=",fnguardar:"&",fnlistaref:"&"},controller:"ModalPagoCreditoCntrl",templateUrl:"static/components/modal/pagos/modalPagoCredito/modalPagoCredito.html?v="+globalgsvapp}}angular.module("isyplus").directive("modalPagoCredito",a)}(),function(){function a(a,b,c,d,e){a.tiposdoc=[],a.bancos=[],a.tipo_doc_sel={},a.banco_sel={},a.find_tipo_doc=function(){$.each(a.tiposdoc,function(b,c){a.form.tasidocum.td_codigo===c.td_codigo&&(a.tipo_doc_sel=c)})},a.find_banco=function(){$.each(a.bancos,function(b,c){a.form.tasidocum.doc_codban===c.ban_codigo&&(a.banco_sel=c)})},a.$watchCollection("tiposdoc",function(b,c){b&&b.length>0&&a.form.editando===!0&&(a.find_tipo_doc(),a.on_tipo_doc_change())}),a.$watchCollection("bancos",function(b,c){b&&b.length>0&&a.form.editando===!0&&a.find_banco()}),a.load_tipos_doc=function(){a.ttransaccpago.ttp_coddocs.length>0?b.listar_por_coddocs(a.ttransaccpago.ttp_coddocs,function(b){b.data.items&&(a.tiposdoc=b.data.items)}):(console.log("no encontro ttp_coddocs es"),console.log(a.ttransaccpago),a.tiposdoc=[],a.bancos=[])},a.on_tipo_doc_change=function(){var b={tra_codigo:a.ttransacc.tra_codigo,tra_tippag:a.ttransacc.tra_tippag,td_emited:void 0!=a.tipo_doc_sel?a.tipo_doc_sel.td_emited:null,clc_infadi:a.ttransaccpago.clc_infadi,clc_codigo:a.ttransaccpago.clc_codigo};a.form.tasidocum.td_codigo=void 0!=a.tipo_doc_sel?a.tipo_doc_sel.td_codigo:null,a.form.tasidocum.td_descri=void 0!=a.tipo_doc_sel?a.tipo_doc_sel.td_descri:null,"BA"==a.ttransaccpago.clc_id?a.form.tasidocum.doc_emited=1:a.form.tasidocum.doc_emited=0,a.ttransaccpago.ttp_coddocs.length>0&&null!=b.td_emited?c.listar_para_formas_pago(b,function(b){a.bancos=b.data.items||[],a.tipo_bancos=b.data.tipo||"bancos",console.log("valor para tipo_bancos es: "),console.log(a.tipo_bancos)}):(a.bancos=[],a.tipo_bancos="bancos")},a.on_banco_change=function(){void 0!=a.banco_sel&&(a.banco_sel.cta_codigo&&(a.form.cta_codigo=a.banco_sel.cta_codigo,a.form.ttp_signo=a.banco_sel.ttp_signo),a.form.tasidocum.doc_codban=a.banco_sel.ban_codigo,a.form.tasidocum.ban_nombre=a.banco_sel.ban_nombre)},a.buscar_ref=function(){var b=a.form.tasidocum.clp_cedruc;return b&&b.length>0?void d.getReferenteByCedNoComps(b).then(function(c){c.data.estado>=1&&e.copyValues(c.data.ref,a.form.tasidocum),2==c.data.estado&&(toastr.warning("Referente no registrado"),a.form.tasidocum.clp_cedruc=b)}):void alert("Ingrese el número de ci/ruc del referente")},a.$on("add_tasidocum_event",function(b,c){a.ttransaccpago=c.forma_pago_sel,a.load_tipos_doc()})}angular.module("isyplus").controller("ModalPagoDocumentoCntrl",a),a.$inject=["$scope","TTipdocServ","TBancoServ","ReferenteSrv","GeneralSrv"]}(),function(){function a(){return{restrict:"AE",scope:{elementid:"@",form:"=",ttransacc:"=",ttransaccpago:"=",fnguardar:"&"},controller:"ModalPagoDocumentoCntrl",templateUrl:"static/components/modal/pagos/modalPagoDocumento/modalPagoDocumento.html?v="+globalgsvapp}}angular.module("isyplus").directive("modalPagoDocumento",a)}(),function(){function a(a){a.ctas_contables=[],a.cta_contable_sel={},a.on_cta_contable_change=function(){a.form.cta_codigo=a.cta_contable_sel.cta_codigo,a.form.ttp_signo=a.cta_contable_sel.ttp_signo},a.find_cta_contable=function(b){a.form.cta_codigo=b,a.cta_contable_sel={},$.each(a.ctas_contables,function(b,c){a.form.cta_codigo===c.cta_codigo&&(a.cta_contable_sel=c)})},a.$on("add_pagogen_event",function(b,c){a.ttransaccpago=c.forma_pago_sel;var d=c.cta_codigo_def;a.ctas_contables=a.ttransaccpago.subitems,a.find_cta_contable(d)})}angular.module("isyplus").controller("ModalPagoGeneralCntrl",a),a.$inject=["$scope"]}(),function(){function a(){return{restrict:"AE",scope:{elementid:"@",form:"=",fnguardar:"&"},controller:"ModalPagoGeneralCntrl",templateUrl:"static/components/modal/pagos/modalPagoGeneral/modalPagoGeneral.html?v="+globalgsvapp}}angular.module("isyplus").directive("modalPagoGeneral",a)}(),function(){function a(a,b,c,d,e){a.valido=!0,a.quitar_marca_rojo=function(){},a.poner_marca_rojo=function(){},a.validar_tipo_doc=function(){var b=(a.referente.clp_cedruc||"").length;if(b>0)if(13!==b){if(2===a.trarefdoc)return d.warning("Ingrese un número de ruc válido","ADVERTENCIA"),!1}else if(10!==b&&1===a.trarefdoc)return d.warning("Ingrese un numero de cédula válido","ADVERTENCIA"),!1;return!0},a.validar_nuevo=function(){var b=(a.referente.clp_cedruc||"").length;b>0&&(10===b?(a.valido=c.esCedulaValida(a.referente.clp_cedruc),a.referente.clp_tipoid="05"):13===b?(a.valido=c.esRucValido(a.referente.clp_cedruc),a.referente.clp_tipoid="04"):(a.valido=!1,a.referente.clp_tipoid=""))},a.validar_existente=function(){var b=(a.referente.clp_cedruc||"").length;b>0&&("05"===a.referente.clp_tipoid?a.valido=c.esCedulaValida(a.referente.clp_cedruc):"04"===a.referente.clp_tipoid?a.valido=c.esRucValido(a.referente.clp_cedruc):""==a.referente.clp_tipoid?a.valido=!1:a.valido=!0)},a.buscar_ref=function(){var e=a.referente.clp_cedruc;if(!(e&&e.length>0))return d.warning("Ingrese el número de CI/RUC del referente","ADVERTENCIA"),void c.setFocus(a.elementid);var f=a.validar_tipo_doc();return f?void b.getReferenteByCedNoComps(e).then(function(b){b.data.estado>=1&&c.copyValues(b.data.ref,a.referente),1==b.data.estado?(a.validar_existente(),a.onreffind()):2==b.data.estado&&(toastr.warning("Referente no registrado"),a.referente.clp_cedruc=e,a.validar_nuevo(),a.onrefnull())}):void a.clear_referente()},a.$watch("valido",function(b,c){b===!0?a.quitar_marca_rojo():b===!1&&a.poner_marca_rojo()}),a.clear_referente=function(){a.referente.clp_cedruc="",a.referente.clp_codigo=0,a.referente.clp_nombre="",a.referente.clp_apelli="",a.referente.clp_direcc="",a.referente.clp_telefo="",a.referente.clp_email=""},a.$watch("referente",function(b,c){var d=0;b&&(d=(b.clp_cedruc||"").length),d>0&&e(function(){a.validar_tipo_doc()||a.clear_referente()},100)})}angular.module("isyplus").controller("BuscarRefDirecCntrl",a),a.$inject=["$scope","ReferenteSrv","GeneralSrv","AlertSrv","$timeout"]}(),function(){function a(){return{restrict:"AE",scope:{elementid:"@",referente:"=",onreffind:"&",onrefnull:"&",onreflista:"&",disabled:"=",trarefdoc:"=",placeholder:"=?"},controller:"BuscarRefDirecCntrl",templateUrl:"static/components/referente/buscarRefDirec/buscarRefDirec.html?v="+globalgsvapp}}angular.module("isyplus").directive("buscarRefDirec",a)}(),function(a){function b(a,b,c){function d(){a.setup.labelCheck||(a.setup.labelCheck="setlabelcheck"),a.idbtncheck="btncheck_"+Math.random(),a.setup.idbtncheck&&(a.idbtncheck=a.setup.idbtncheck)}function e(){a.ischeck=!a.ischeck,a.ischeck&&c.setFocusWithTimeout(a.setup.idprop,100)}function f(c){b.onkeydown(a,c)}function g(c){b.onkeyup(a,c)}function h(c){b.sel_item(a,c)}function i(c){b.on_lost_focus(a)}b.config(a),a.onkeydown=f,a.onkeyup=g,a.sel_item=h,a.on_lost_focus=i,a.onCheckClick=e,a.$watch("model",function(c,d){b.on_model_change(a)}),d()}a.controller("BuscarefCheckCntrl",b),b.$inject=["$scope","BaseAutocompServ","GeneralSrv"]}(IsyplusApp),function(a){function b(){return{restrict:"EA",scope:{tipo:"@",data:"=",model:"=",ischeck:"=",uri:"@",setup:"=",onlistaclick:"&"},controller:"BuscarefCheckCntrl",templateUrl:"static/components/referente/serviBuscarefCheck/serviBuscarefCheck.html?v="+globalgsvapp}}a.directive("serviBuscarefCheck",b)}(IsyplusApp),function(){function a(){return{restrict:"E",scope:{form:"=",setup:"=",disabled:"="},controller:"AnioMesDirCntrl",templateUrl:"static/components/rfechas/anioDir/anioDir.html?v="+globalgsvapp}}angular.module("isyplus").directive("anioDir",a)}(),function(){function a(a,b,c){a.label_mes_desde="",a.label_mes_hasta="",a.idpropdesde="desde",a.idprophasta="hasta",a.anioa="",a.aniob="",a.mesa="",a.mesb="",a.auxfnenter=function(){},a.setup.fnondesdeenter&&(a.fnondesdeenter=a.setup.fnondesdeenter),a.setup.fnonhastaenter&&(a.fnonhastaenter=a.setup.fnonhastaenter),a.setup.idpropdesde&&(a.idpropdesde=a.setup.idpropdesde),a.setup.idprophasta&&(a.idprophasta=a.setup.idprophasta),a.get_label_mes=function(a){var c=b.getMesLargo(a-1);return c||""},a.set_mes=function(b,c){1==b?(a.form.mesa=c,a.label_mes_desde=a.get_label_mes(c)):(a.form.mesb=c,a.label_mes_hasta=a.get_label_mes(c)),a.on_fechas_change()},a.on_fechas_change=function(){c.isNumber(a.form.anioa)&&c.isNumber(a.form.aniob)?(a.form.desde=b.change_day_month_year(a.form.desde,1,a.form.mesa,a.form.anioa),a.form.hasta=b.change_day_month_year(a.form.hasta,1,a.form.mesb,a.form.aniob)):console.log("El valor del anio es incorrecto no se cambia valor de anio--->")},a.on_anio_change=function(){c.isNumber(a.form.anioa)&&c.isNumber(a.form.aniob)?(a.form.desde=b.change_day_month_year(a.form.desde,1,1,a.form.anioa),a.form.hasta=b.change_day_month_year(a.form.hasta,1,1,a.form.aniob)):console.log("El valor del anio es incorrecto no se cambia valor de anio--->")},a.init=function(){a.anioa=a.form.anioa,a.aniob=a.form.aniob,a.mesa=a.form.mesa,a.mesb=a.form.mesb,a.label_mes_desde=a.get_label_mes(a.form.mesa),a.label_mes_hasta=a.get_label_mes(a.form.mesb)},a.init_rango_anio=function(){a.init(),c.isNumber(a.form.anioa)&&c.isNumber(a.form.aniob)&&(a.form.desde=b.change_day_month_year(a.form.desde,1,1,a.form.anioa),
a.form.hasta=b.change_day_month_year(a.form.hasta,1,1,a.form.aniob))},a.$on("init_rango_fechas",function(b,c){a.init()}),a.$on("init_rango_fechas_anio",function(b,c){a.init_rango_anio()}),a.$watch("anioa",function(b,c){try{a.form.anioa=b,a.on_anio_change()}catch(d){console.log("Error en onfechaschange")}}),a.$watch("aniob",function(b,c){try{a.form.aniob=b,a.on_anio_change()}catch(d){console.log("Error en onfechaschange")}}),a.$watch("mesa",function(b,c){try{a.form.mesa=b,a.on_fechas_change()}catch(d){console.log("Error en onfechaschange")}}),a.$watch("mesb",function(b,c){try{a.form.mesb=b,a.on_fechas_change()}catch(d){console.log("Error en onfechaschange")}})}angular.module("isyplus").controller("AnioMesDirCntrl",a),a.$inject=["$scope","FechasServ","NumberServ"]}(),function(){function a(){return{restrict:"E",scope:{form:"=",setup:"=",disabled:"="},controller:"AnioMesDirCntrl",templateUrl:"static/components/rfechas/anioMesDir/anioMesDir.html?v="+globalgsvapp}}angular.module("isyplus").directive("anioMesDir",a)}(),function(){function a(a,b,c){a.label_mes_desde="",a.label_mes_hasta="",a.idpropdesde="desde",a.idprophasta="hasta",a.anioa="",a.aniob="",a.mesa="",a.mesb="",a.auxfnenter=function(){},a.setup.fnondesdeenter&&(a.fnondesdeenter=a.setup.fnondesdeenter),a.setup.fnonhastaenter&&(a.fnonhastaenter=a.setup.fnonhastaenter),a.setup.idpropdesde&&(a.idpropdesde=a.setup.idpropdesde),a.setup.idprophasta&&(a.idprophasta=a.setup.idprophasta),a.get_label_mes=function(a){var c=b.getMesLargo(a-1);return c||""},a.set_mes=function(b,c){1==b?(a.form.mesa=c,a.label_mes_desde=a.get_label_mes(c)):(a.form.mesb=c,a.label_mes_hasta=a.get_label_mes(c)),a.on_fechas_change()},a.on_fechas_change=function(){c.isNumber(a.form.anioa)&&c.isNumber(a.form.aniob)?(a.form.desde=b.change_day_month_year(a.form.desde,1,a.form.mesa,a.form.anioa),a.form.hasta=b.change_day_month_year(a.form.hasta,1,a.form.mesb,a.form.aniob)):console.log("El valor del anio es incorrecto no se cambia valor de anio--->")},a.on_anio_change=function(){c.isNumber(a.form.anioa)&&c.isNumber(a.form.aniob)?(a.form.desde=b.change_day_month_year(a.form.desde,1,1,a.form.anioa),a.form.hasta=b.change_day_month_year(a.form.hasta,1,1,a.form.aniob)):console.log("El valor del anio es incorrecto no se cambia valor de anio--->")},a.init=function(){a.anioa=a.form.anioa,a.aniob=a.form.aniob,a.mesa=a.form.mesa,a.mesb=a.form.mesb,a.label_mes_desde=a.get_label_mes(a.form.mesa),a.label_mes_hasta=a.get_label_mes(a.form.mesb)},a.init_rango_anio=function(){a.init(),c.isNumber(a.form.anioa)&&c.isNumber(a.form.aniob)&&(a.form.desde=b.change_day_month_year(a.form.desde,1,1,a.form.anioa),a.form.hasta=b.change_day_month_year(a.form.hasta,1,1,a.form.aniob))},a.$on("init_rango_fechas",function(b,c){a.init()}),a.$on("init_rango_fechas_anio",function(b,c){a.init_rango_anio()}),a.$watch("anioa",function(b,c){try{a.form.anioa=b,a.on_anio_change()}catch(d){console.log("Error en onfechaschange")}}),a.$watch("aniob",function(b,c){try{a.form.aniob=b,a.on_anio_change()}catch(d){console.log("Error en onfechaschange")}}),a.$watch("mesa",function(b,c){try{a.form.mesa=b,a.on_fechas_change()}catch(d){console.log("Error en onfechaschange")}}),a.$watch("mesb",function(b,c){try{a.form.mesb=b,a.on_fechas_change()}catch(d){console.log("Error en onfechaschange")}})}angular.module("isyplus").controller("rangoFechasAnioCntrl",a),a.$inject=["$scope","FechasServ","NumberServ"]}(),function(){function a(){return{restrict:"E",scope:{form:"=",setup:"=",disabled:"="},controller:"rangoFechasAnioCntrl",templateUrl:"static/components/rfechas/rangoFechasAnio/rangoFechasAnio.html?v="+globalgsvapp}}angular.module("isyplus").directive("rangoFechasAnio",a)}(),function(){function a(a,b,c){a.label_mes_desde="",a.label_mes_hasta="",a.idpropdesde="desde",a.idprophasta="hasta",a.anioa="",a.aniob="",a.mesa="",a.mesb="",a.auxfnenter=function(){},a.setup.fnondesdeenter&&(a.fnondesdeenter=a.setup.fnondesdeenter),a.setup.fnonhastaenter&&(a.fnonhastaenter=a.setup.fnonhastaenter),a.setup.idpropdesde&&(a.idpropdesde=a.setup.idpropdesde),a.setup.idprophasta&&(a.idprophasta=a.setup.idprophasta),a.get_label_mes=function(a){var c=b.getMesLargo(a-1);return c||""},a.set_mes=function(b,c){1==b?(a.form.mesa=c,a.label_mes_desde=a.get_label_mes(c)):(a.form.mesb=c,a.label_mes_hasta=a.get_label_mes(c)),a.on_fechas_change()},a.on_fechas_change=function(){c.isNumber(a.form.anioa)&&c.isNumber(a.form.aniob)?(a.form.desde=b.change_day_month_year(a.form.desde,1,a.form.mesa,a.form.anioa),a.form.hasta=b.change_day_month_year(a.form.hasta,1,a.form.mesb,a.form.aniob)):console.log("El valor del anio es incorrecto no se cambia valor de anio--->")},a.on_anio_change=function(){c.isNumber(a.form.anioa)&&c.isNumber(a.form.aniob)?(a.form.desde=b.change_day_month_year(a.form.desde,1,1,a.form.anioa),a.form.hasta=b.change_day_month_year(a.form.hasta,1,1,a.form.aniob)):console.log("El valor del anio es incorrecto no se cambia valor de anio--->")},a.init=function(){a.anioa=a.form.anioa,a.aniob=a.form.aniob,a.mesa=a.form.mesa,a.mesb=a.form.mesb,a.label_mes_desde=a.get_label_mes(a.form.mesa),a.label_mes_hasta=a.get_label_mes(a.form.mesb)},a.init_rango_anio=function(){a.init(),c.isNumber(a.form.anioa)&&c.isNumber(a.form.aniob)&&(a.form.desde=b.change_day_month_year(a.form.desde,1,1,a.form.anioa),a.form.hasta=b.change_day_month_year(a.form.hasta,1,1,a.form.aniob))},a.$on("init_rango_fechas",function(b,c){a.init()}),a.$on("init_rango_fechas_anio",function(b,c){a.init_rango_anio()}),a.$watch("anioa",function(b,c){try{a.form.anioa=b,a.on_anio_change()}catch(d){console.log("Error en onfechaschange")}}),a.$watch("aniob",function(b,c){try{a.form.aniob=b,a.on_anio_change()}catch(d){console.log("Error en onfechaschange")}}),a.$watch("mesa",function(b,c){try{a.form.mesa=b,a.on_fechas_change()}catch(d){console.log("Error en onfechaschange")}}),a.$watch("mesb",function(b,c){try{a.form.mesb=b,a.on_fechas_change()}catch(d){console.log("Error en onfechaschange")}})}angular.module("isyplus").controller("RangoFechasAnioMesCntrl",a),a.$inject=["$scope","FechasServ","NumberServ"]}(),function(){function a(){return{restrict:"E",scope:{form:"=",setup:"=",disabled:"="},controller:"RangoFechasAnioMesCntrl",templateUrl:"static/components/rfechas/rangoFechasAnioMes/rangoFechasAnioMes.html?v="+globalgsvapp}}angular.module("isyplus").directive("rangoFechasAnioMes",a)}(),function(a){function b(){function a(){var a=!1;return function(b){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(b)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,4)))&&(a=!0)}(navigator.userAgent||navigator.vendor||window.opera),a}this.setright=function(a,b){var c="#"+a;$(c).css("right",b)},this.setleft=function(a,b){var c="#"+a;$(c).css("left",b)},this.add_affix=function(b,c){var d=a();if(!d){var e="#"+b,f=0;try{f=$(e).offset(),f?$(window).scroll(function(){var a=f.top;$(window).scrollTop()>a?$(e).css("position","fixed").css("top",c||30):$(e).css("position","static")}):alert("Elementid:"+b+", no localizado, no puedo establecer affix")}catch(g){alert("Elementid:"+b+", no localizado, no puedo establecer affix")}}}}a.service("AffixService",b)}(IsyplusApp),function(a){function b(){function a(a){return a.css("position","absolute"),a.css("top",Math.max(0,($(window).height()-$(this).outerHeight())/2+$(window).scrollTop())+"px"),a.css("left",Math.max(0,($(window).width()-$(this).outerWidth())/2+$(window).scrollLeft())+"px"),a}var b={show:function(b){b?($("#ajax_anim_fondo").height($(document).height()),a($("#ajax_anim")),$("#ajax_anim_fondo").css("visibility","visible"),$("#ajax_anim").css("visibility","visible")):($("#ajax_anim_fondo").css("visibility","hidden"),$("#ajax_anim").css("visibility","hidden"))}};return b}a.factory("ajaxAnimService",b)}(IsyplusApp),function(a){function b(){this.confirm=function(a,b,c,d){swal({title:"",text:a,type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Aceptar",cancelButtonText:"Cancelar",closeOnConfirm:void 0===close||c,closeOnCancel:void 0===close||d},b)},this.info=function(a,b,c){swal({title:b||"Información",text:a,type:"info"},c)},this.success=function(a,b,c){swal({title:b||"Éxito",text:a,type:"success"},c)},this.warning=function(a,b,c,d){swal({title:b||"Advertencia",text:a,type:"warning",closeOnConfirm:void 0===close||d},c)},this.error=function(a,b,c){swal({title:b||"Error",text:a,type:"error"},c)},this.input=function(a,b,c){swal({title:b||"Error",text:a,type:"input",showCancelButton:!0,closeOnConfirm:!0,animation:"slide-from-top"},c)}}a.service("AlertSrv",b)}(IsyplusApp),function(a){function b(){this.abecedario=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","Ñ","O","P","Q","R","S","T","U","V","W","X","Y","Z"],this.get_letra=function(a){return a>27?"":this.abecedario[a-1]}}a.service("AlfabetoServ",b)}(IsyplusApp),function(module){function BaseAutocompServ($filter,$http,$timeout){this.config=function($scope){$scope.uri="",$scope.indexitem=-1,$scope.itemsel={},$scope.filtro={},$scope.idprop="autocompletado_"+Math.random(),$scope.csscolor={color:"#000000"},$scope.csscolornull="#000000",$scope.filtrados=[],$scope.placeholder="",$scope.auxfnsel=function(a){},$scope.propFiltro="label",$scope.propFiltroId="id",$scope.nomParamFiltroUri="filtro",$scope.fnOnSel=$scope.auxfnsel,$scope.fnOnNull=$scope.auxfnsel,$scope.fnOnEnterNull=$scope.auxfnsel,$scope.showClearBtn=0,$scope.auxfnsel=function(a){console.log("auxfnsel no definido, se ejectua la funcion por defecto.....!")},$scope.setup.propFiltro&&($scope.propFiltro=$scope.setup.propFiltro),$scope.setup.propFiltroId&&($scope.propFiltroId=$scope.setup.propFiltroId),$scope.setup.placeholder&&($scope.placeholder=$scope.setup.placeholder),$scope.setup.uri&&($scope.uri=$scope.setup.uri),$scope.setup.nomParamFiltroUri&&($scope.nomParamFiltroUri=$scope.setup.nomParamFiltroUri),$scope.setup.fnOnSel&&($scope.fnOnSel=eval($scope.setup.fnOnSel)),$scope.setup.fnOnNull&&($scope.fnOnNull=eval($scope.setup.fnOnNull)),$scope.setup.fnOnEnterNull&&($scope.fnOnEnterNull=eval($scope.setup.fnOnEnterNull)),$scope.setup.idprop&&($scope.idprop=$scope.setup.idprop),$scope.setup.colornull&&($scope.csscolornull=$scope.setup.colornull),$scope.setup.showClearBtn&&($scope.showClearBtn=$scope.setup.showClearBtn)},this.nav_items_sugg=function(a,b){a.indexitem=a.indexitem+b,a.itemsel=a.filtrados[a.indexitem]},this.onkeydown=function(a,b){if(38==b.keyCode)b.preventDefault(),a.indexitem>0&&this.nav_items_sugg(a,-1);else if(40==b.keyCode)b.preventDefault(),a.indexitem+1<a.filtrados.length&&this.nav_items_sugg(a,1);else if(13==b.keyCode)if(b.preventDefault(),a.itemsel[a.propFiltro])this.sel_item(a,a.itemsel);else try{a.fnOnEnterNull()}catch(c){console.error(" Error al ejecutar función ")}else 27==b.keyCode?(b.preventDefault(),a.filtrados=[],this.logica_filtrados(a)):46!=b.keyCode&&8!=b.keyCode||"n"==a.tipo&&(a.filtrados=$filter("filter")(a.data,a.filtro,function(a,b){return a.toLowerCase().indexOf(b.toLowerCase())>=0}),this.logica_filtrados(a))},this.onkeyup=function(a,b){(b.keyCode>=65&&b.keyCode<=90||b.keyCode>=48&&b.keyCode<=57||b.keyCode>=96&&b.keyCode<=105||46==b.keyCode||8==b.keyCode)&&("x"==a.tipo?this.do_ajax(a):"n"==a.tipo&&(a.filtrados=$filter("filter")(a.data,a.filtro,function(a,b){return(a||"").toLowerCase().indexOf((b||"").toLowerCase())>=0}),this.logica_filtrados(a)))},this.sel_item=function(a,b){a.model=b;try{$timeout(function(){a.fnOnSel(b)})}catch(c){console.error(" Error al ejecutar función ")}},this.do_ajax=function(a){var b=a.filtro[a.propFiltro]||"",c=a.uri+"&"+a.nomParamFiltroUri+"="+b,d=this;$http.get(c).then(function(b){b.data.items&&(a.filtrados=b.data.items,d.logica_filtrados(a))})},this.do_ajax_with_fnthen=function(a,b){var c=a.filtro[a.propFiltro]||"",d=a.uri+"&"+a.nomParamFiltroUri+"="+c;$http.get(d).then(b)},this.filtro_to_model=function(a){a.model[a.propFiltro]=a.filtro[a.propFiltro]},this.model_to_filtro=function(a){a.filtro[a.propFiltro]=a.model[a.propFiltro]},this.on_lost_focus=function(a){var b=this;$timeout(function(){b.model_to_filtro(a),a.filtrados=[]},500)},this.logica_filtrados=function(a){var b=a.filtrados.length;b>0?(a.csscolor={color:"#000000"},a.itemsel=a.filtrados[0],a.indexitem=0):(a.csscolor={color:a.csscolornull},this.listener_null(a))},this.listener_null=function(a){a.model={},this.filtro_to_model(a);try{$timeout(function(){a.fnOnNull(a.filtro)})}catch(b){console.error(" Error al ejecutar función ")}},this.on_model_change=function(a){this.model_to_filtro(a),a.indexitem=-1,a.itemsel={},a.filtrados=[]},this.on_uri_change=function(a){}}module.service("BaseAutocompServ",BaseAutocompServ),BaseAutocompServ.$inject=["$filter","$http","$timeout"]}(IsyplusApp),function(a){function b(){function a(a){return a.format("DD/MM/YYYY")}function b(a){return moment(a,"DD/MM/YYYY")}function c(){var b=moment();return a(b)}function d(c,d){var e=b(c),f=e.add("days",d);return a(f)}function e(c,d){var e=b(c),f=e.add("year",d);return a(f)}function f(c,d){var e=b(c);return e.year(d),a(e)}function g(c,d,e){var f=b(c);return f.year(e),f.month(d-1),a(f)}function h(c,d,e,f){var g=b(c);return g.date(d),g.year(f),g.month(e-1),a(g)}function i(c,d,e){var f=b(c);return f.date(d),f.month(e-1),a(f)}function j(c,d){var e=b(c);return e.date(d),a(e)}function k(a){var b=l();return b[a]}function l(){return["Dom","Lun","Mar","Mié","Jue","Vie","Sab"]}function m(a){return n()[a]}function n(){return["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sabado"]}function o(a){var b=p();return b[a]}function p(){return["Ene","Feb","Mar","Abr","May","Jun","Jul","Agos","Sept","Oct","Nov","Dic"]}function q(a){var b=r();return b[a]}function r(){return["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septtiembre","Octubre","Noviembre","Diciembre"]}function s(a){return m(a.weekday())+", "+a.get("date")+" de "+q(a.get("month"))+" del "+a.get("year")}function t(a){return moment(a,"DD/MM/YYYY",!0).isValid()}return{format_momment_date:a,parse_cadena:b,get_fecha_actual:c,sumar_dias:d,sumar_anios:e,change_year:f,change_month_year:g,change_day_month_year:h,change_day_month:i,change_day:j,getDiaSemanaCorto:k,get_ls_dias_corto:l,getDiaSemanaLargo:m,get_ls_dias_largo:n,getMesCorto:o,get_str_mes_corto:p,getMesLargo:q,get_str_mes_largo:r,getFechaLetras:s,esFechaValida:t}}a.factory("FechasServ",b)}(IsyplusApp),function(a){function b(a,b){var c=function(a,b,c){return function(){c.$apply(function(){b.resolve(a.result)})}},d=function(a,b,c){return function(){c.$apply(function(){b.reject(a.result)})}},e=function(a,b){return function(a){b.$broadcast("fileProgress",{total:a.total,loaded:a.loaded})}},f=function(a,b){var f=new FileReader;return f.onload=c(f,a,b),f.onerror=d(f,a,b),f.onprogress=e(f,b),f},g=function(b,c){var d=a.defer(),e=f(d,c);return e.readAsDataURL(b),d.promise};return{readAsDataUrl:g}}a.factory("CustomFileReader",b),b.$inject=["$q","$log"]}(IsyplusApp),function(a){function b(a){function b(a,b){angular.isUndefined(b)?a&&$("#"+a).focus():c(a,b)}function c(c,d){a(function(){b(c)},d||300)}var d={setFocus:b,setFocusTimeout:c};return d}a.factory("focusService",b),b.$inject=["$timeout"]}(IsyplusApp),function(a){function b(a,b,c,d){function e(){return b.get("/rest/tusuarios/0?opc=numuser")}function f(a){return b.get("/rest/tusuarios/"+a+"?opc=clanom")}function g(){return a.getObject("rutaRegresa",null)}function h(b){a.setObject("rutaRegresa",b)}function i(a){b.get("/rest/general/0?opc=obtcod").then(function(b){1===b.data.estado&&(a.empresa=b.data.codemp,a.almacen=b.data.almcod,a.esquema=b.data.esquema,a.usuario=b.data.usuario,a.seccion=b.data.seccion)})}function j(a){return b.get("/rest/transacc/timpuestos").then(a)}function k(a,b,c){var d=2==parseInt(globalModoDespligeApp),e="/reportes/repjasper/"+a+"?formato="+c+"&"+$.param(b);d||(e="http://localhost:8080/repjasper/"+a+"?formato="+c+"&"+$.param(b)),window.open(e)}function l(a){var b=moment(a,"DD/MM/YYYY",!0).isValid(),c=moment(a,"DD/MM/YYYY",!0).year()>2e3;return b&&c}function m(a,b){var c=moment(a,"DD/MM/YYYY"),d=moment(b,"DD/MM/YYYY");return moment(c).isBefore(d)}function n(a){var b=0,c=10,d="212121212",e=24,f=5,g=!1;if(a.length==c){var h=parseInt(a.substring(0,2),10),i=parseInt(a[2],10),j=parseInt(a[9],10);if(h>0&&h<=e&&i<=f){for(var k=0;k<d.length;k++){var l=parseInt(d[k],10)*parseInt(a[k],10);b+=l>9?l-9:l}var m=b%10;g=0===m?0===j:j===10-m}}return g}function o(a){var b=13,c=24,d=5,e=0,f=!1;if(a.length==b){var g=parseInt(a.substring(0,2),10),h=parseInt(a[2],10),i=a.substring(10,13);if(("001"===i||"002"===i||"003"===i)&&g>0&&g<=c)if(h<=d)f=this.esCedulaValida(a.substring(0,10));else if(6==h){var j="32765432",k=parseInt(a[8],10);e=0;for(var l=0;l<j.length;l++){var m=parseInt(j[l],10)*parseInt(a[l],10);e+=m}var n=e%11;f=0===n?0===k:k===11-n}else if(9==h){var j="432765432",k=parseInt(a[9],10);e=0;for(var l=0;l<j.length;l++){var m=parseInt(j[l],10)*parseInt(a[l],10);e+=m}var n=e%11;f=0===n?0===k:k===11-n}}return f}function p(a){var b=!1;return 10===a.length?b=this.esCedulaValida(a):13===a.length&&(b=this.esRucValido(a)),b}function q(a){return b.get("/rest/general/0?cedruc="+a+"&opc=validcedruc")}function r(b,c){a.setObject(b,c)}function s(b){return a.getObject(b,null)}function t(b){a["delete"](b)}function u(a){var b=s(a);return!!b}function v(a,b){var c={};for(var d in a)if(0===d.indexOf("$"));else{var e=typeof a[d];"function"!==e&&(c[d]=a[d])}this.setSSValue(b,c)}function w(a,b){var c=s(b);if(c){for(var d in c)a[d]=c[d];return t(b),!0}return alert("NO HAY DATOS EN SS DEL FORM clave "+b),!1}function x(a,b){for(var c in a)b[c]=a[c]}function y(a){$("#"+a).focus()}function z(a,b){c(function(){y(a)},b)}function A(a,b,c,e){$("#msgConfirm").html(a),$("#btnAceptConfir").replaceWith($("#btnAceptConfir")),$("#btnAceptConfir").attr("ng-click",b+"('"+e+"');"),d($("#btnAceptConfir"))(c),$("#msgModalConfirm").modal("show")}function B(a,b,c){var d,e;for(d in b)e=b[d],e[c]=1==a?1:0}function C(a){return 0===Object.keys(a).length}function D(a){return!!this.is_undefined(a)||null===a}function E(a){return!this.is_undefined(a)&&null===a}function F(a){return"undefined"==typeof a}function G(){var a=N("appconfig");return b.get(a)}function H(){var a=N("pry_codigo");return b.get(a)}function I(){return b.get("/rest/general?opc=emprel")}function J(){var a=N("esquema");return b.get(a)}function K(){var a=N("almdescri");return b.get(a)}function L(){var a=N("nparcialview");return b.get(a)}function M(){var a=N("tclave");return b.get(a)}function N(a){return"/rest/general/0?opc="+a}return{almdescri:K,cambiarEstadoLista:B,clearSSValue:t,confirma:A,copyValues:x,esCedulaValida:n,esCiRucValido:p,esFechaMenor:m,esFechaValida:l,esRucValido:o,exportaArchivo:k,get_appconfig:G,getClaNombre:f,getCodigos:i,getEmprel:I,getEsquemaActual:J,getImpuestos:j,getnParcialView:L,getNumUser:e,getProyectoSesion:H,getRutaRegresa:g,getSSValue:s,getTclave:M,getValidCedRuc:q,is_null:E,is_undefined:F,isNullOrUndef:D,isScopeInSS:u,isObjVacio:C,loadSSToScope:w,saveScopeToSS:v,setFocus:y,setFocusWithTimeout:z,setRutaRegresa:h,setSSValue:r}}a.factory("GeneralSrv",b),b.$inject=["$sessionStorageSrv","$http","$timeout","$compile"]}(IsyplusApp),function(a){function b(a){function b(b,c){var c=c||{marcado:!0};return a.filtrar(b,c)}function c(b,c){var d=c.marcado||!1;a.limpiarMarcados(b,{marcado:!0},"marcado"),c.marcado=!d}function d(a,b){var c=b.marcado||!1;b.marcado=!c}function e(b,c){var d=c.marcado||!1;a.limpiarMarcados(b,{marcado:!0},"marcado"),c.marcado=d}function f(a,b){var c=b.marcado||!1;b.marcado=c}function g(a){a.gridOptions={enableRowSelection:!0,enableFullRowSelection:!0,enableSelectAll:!1,selectionRowHeaderWidth:40,rowHeight:45,showGridFooter:!0},a.gridOptions.columnDefs=[],a.gridOptions.multiSelect=!1,a.gridOptions.onRegisterApi=function(b){a.gridApi=b,b.selection.on.rowSelectionChanged(a,function(b){b.isSelected?a.selectedItem=b.entity:a.selectedItem={}}),b.selection.on.rowSelectionChangedBatch(a,function(a){})}}return{getFilasMarcadas:b,onRowClicSingle:c,onRowClicMultiple:d,onCheckClicSingle:e,onCheckClicMultiple:f,initGrid:g}}a.factory("gridService",b),b.$inject=["ListasServ"]}(IsyplusApp),function(a){function b(a,b){var c=0;return{request:function(d){return++c>0&&b.$broadcast("loading:progress"),0==d.url.indexOf("/rest")&&(d.url=(2==parseInt(globalModoDespligeApp)?"/v2":"")+d.url),d||a.when(d)},requestError:function(b){return a.reject(b)},response:function(d){return 0===--c&&b.$broadcast("loading:finish"),d||a.when(d)},responseError:function(d){0===--c&&b.$broadcast("loading:finish");var e=0,f=0,g="VERIFIQUE SU CONEXIÓN A INTERNET";if(d.data&&(console.log("rejection.data--->",d.data),e=d.data.ss_expirada||0,f=d.data.error_code||"",g=d.data.msg||"",d.data.inputid))try{var h="#"+d.data.inputid;$(h).focus().blur(function(){$(h).parent().removeClass("has-error")}).parent().addClass("has-error")}catch(i){}if(0===e){var j="error";100===f?j="info":101===f?j="warning":102===f&&(j="error"),setTimeout(function(){try{swal({title:"",text:g,type:j}),console.log("swal mostrado--->")}catch(a){console.log("Error al mostrar swal",a),alert(g)}},600)}else try{swal({title:"Sessión expirada!",text:"Tu sesión ha expirado por favor ingresa de nuevo al sistema!",type:"error"},function(){var a=2==parseInt(globalModoDespligeApp)?"/v2":"/";window.location=a})}catch(i){alert("Tu sesión ha expirado por favor ingresa de nuevo al sistema")}return a.reject(d)}}}a.factory("AnimHttpInterceptor",b),b.$inject=["$q","$rootScope"]}(IsyplusApp),function(a){function b(a){function b(b,c){return a("filter")(b,c)}function c(a,b){var c=[];return $.each(a,function(a,d){c.push(d[b])}),c}function d(a,b,c){var d=this.filtrar(a,b);angular.forEach(d,function(a,b){a[c]=!1})}function e(a){this.limpiarMarcados(a,{marcado:!0},"marcado")}function f(a){var b=this.filtrar(a,{marcado:!0});return b}function g(a){var b=this.filtrar(a,{marcado:!0});return b&&b.length>0?b[0]:null}function h(a,b){return a.indexOf(b)}function i(a,b){var c=a.indexOf(b);c!=-1&&a.splice(c,1)}function j(a,b,c){var d;return $.each(a,function(a,e){if(e[b]==c)return d=e,!1}),d}function k(a,b){var c=0;return angular.forEach(a,function(a,d){c+=Number(a[b])}),c}return{filtrar:b,getValoresColumna:c,limpiarMarcados:d,getIndexOf:h,removeItem:i,buscarObjeto:j,sumarColumna:k,limpiaMarca:e,getMarcados:f,getFirstMarcado:g}}a.factory("ListasServ",b),b.$inject=["$filter"]}(IsyplusApp),function(a){function b(a){this.F1=112,this.F2=113,this.F3=114,this.F4=115,this.F5=116,this.F6=117,this.F7=118,this.F8=119,this.F9=120,this.F10=121,this.F11=122,this.F12=123,this.ESC=27,this.RETROCESO=8,this.TAB=9,this.ENTER=13,this.MAYUS=16,this.CONTROL=17,this.BARRA_ESPACIADORA=32,this.REPAG=33,this.AVPAG=34,this.INICIO=36,this.FIN=35,this.FLECHA_IZQ=37,this.FLECHA_DER=39,this.FLECHA_ARRIBA=38,this.FLECHA_ABAJO=40,this.is_procesando=function(a){return a.procesando_key||!1},this.add_keydown_listener=function(b,c,d){var e=this;a.on("keydown",function(a){a.which==b&&(a.preventDefault(),e.is_procesando(c)===!0?alert("!!!YA SE ESTA PROCESANDO ESPERE UN MOMENTO!!!"):d(c))})},this.remove_keydown_listener=function(){a.off("keydown")},this.add_state_keydown_event=function(a,b,c){var d=this;a.$on("$stateChangeSuccess",function(e,f,g,h,i){d.add_keydown_listener(b,a,c)})},this.remove_state_keydown_event=function(b){b.$on("$stateChangeStart",function(b,c,d,e,f){a.off("keydown")})},this.add_action_on_state_change_start=function(a,b){a.$on("$stateChangeStart",function(a,c,d,e,f){b()})}}a.service("ListenerServ",b),b.$inject=["$document"]}(IsyplusApp),function(a){function b(a){this.set=function(b,c){a.localStorage[b]=c},this.get=function(b,c){return a.localStorage[b]||c},this.setObject=function(b,c){a.localStorage[b]=JSON.stringify(c)},this.getObject=function(b,c){return a.localStorage[b]?JSON.parse(a.localStorage[b]):c},this["delete"]=function(b){delete a.localStorage[b]}}a.service("$localStorageSrv",b),b.$inject=["$window"]}(IsyplusApp),function(a){function b(){this.show=function(a){$("#"+a).modal("show")},this.hide=function(a){$("#"+a).modal("hide")},this.onShow=function(a,b){$("#"+a).on("show.bs.modal",b)},this.onShown=function(a,b){$("#"+a).on("shown.bs.modal",b)},this.onHide=function(a,b){$("#"+a).on("hide.bs.modal",b)},this.onHidden=function(a,b){$("#"+a).on("hidden.bs.modal",b)},this.onLoaded=function(a,b){$("#"+a).on("loaded.bs.modal",b)}}a.service("ModalServ",b)}(IsyplusApp),function(a){function b(){this.info=function(a){toastr.info(a)},this.success=function(a){toastr.success(a)},this.warning=function(a){toastr.warning(a)},this.error=function(a){toastr.error(a)},this.erroroptions=function(a,b,c){toastr.error(a,b,c)},this.warningoptions=function(a,b,c){toastr.warning(a,b,c)},this.infooptions=function(a,b,c){toastr.info(a,b,c)},this.successoptions=function(a,b,c){toastr.success(a,b,c)}}a.service("NotifServ",b)}(IsyplusApp),function(a){function b(a,b){function c(a){return $.isNumeric(a)}function d(a){return!!this.isNumber(a)&&Number(a)>0}function e(a,b){return Number(a)>Number(b)}function f(a,b){return new Number(a)>=new Number(b)}function g(a){return!!$.isNumeric(a)&&Number(a)>=0}function h(a,b,c){if($.isNumeric(a)){var d=Number(a);return d>=b&&d<=c}return!1}function i(c,d){var e=a("number")(c,d),f=new RegExp("\\"+b.NUMBER_FORMATS.GROUP_SEP,"g"),g=e.replace(f,"");return Number(g)}function j(a,b){return Math.floor(Math.random()*(b-a))+a}return{isNumber:c,isNumberMayorCero:d,isNumberAMayorToB:e,isNumberAMayorIgualToB:f,isNumberMayorIgualCero:g,isNumberBetween:h,redondear:i,getRandomNumber:j}}a.factory("NumberServ",b),b.$inject=["$filter","$locale"]}(IsyplusApp),function(a){function b(a){function b(b,c){a.sessionStorage[b]=c}function c(b,c){return a.sessionStorage[b]||c}function d(b,c){a.sessionStorage[b]=JSON.stringify(c)}function e(b,c){return a.sessionStorage[b]?JSON.parse(a.sessionStorage[b]):c}function f(b){delete a.sessionStorage[b]}function g(){a.sessionStorage.clear()}return{set:b,get:c,setObject:d,getObject:e,"delete":f,clear:g}}a.factory("$sessionStorageSrv",b),b.$inject=["$window"]}(IsyplusApp),function(a){function b(){function a(){return $("#appMenu").width()}function b(){return $("#appMenu").is(":visible")}function c(){$("#appMenu").removeClass("col-md-2").addClass("col0"),$("#appContainer").removeClass("col-md-10").addClass("col-md-12"),$("#appMenu").hide()}function d(){$("#appMenu").removeClass("col0").addClass("col-md-2"),$("#appMenu").css("visibility","visible").hide().fadeIn().removeClass("hidden"),$("#appContainer").removeClass("col-md-12").addClass("col-md-10")}function e(){$("#appBrand").on("click",function(a){$("#appMenu").hasClass("col-md-2")?c():d()}),$("#appBarToggle").is(":visible")&&c(),$("#sidebar > a").on("mouseover",function(a){$(this).addClass("mymenulihover")}),$("#sidebar > a").on("mouseout",function(a){$(this).removeClass("mymenulihover")}),$("#sidebar > div > a").on("mouseover",function(a){$(this).addClass("mylgihover")}),$("#sidebar > div > a").on("mouseout",function(a){$(this).removeClass("mylgihover")}),$("#sidebar > a").on("click",function(a){var b=$(this).closest("#sidebar").children(".mylgiclick");b.removeClass("active"),b.removeClass("mylgiclick"),b.next("div").collapse("hide");var c=$("#sidebar > div").children(".mylgiclick");c.removeClass("mylgiclick"),$(this).addClass("active"),$(this).addClass("mylgiclick"),$(this).next("div").collapse("toggle")}),$("#sidebar > div > a").on("click",function(a){var b=$(this).closest("#sidebar > div").children(".mylgiclick");b.removeClass("mylgiclick"),$(this).addClass("mylgiclick"),$("#appBarToggle").is(":visible")&&c()}),$("#appBrand").popover({trigger:"hover"})}return{hideAppSideBar:c,showAppSideBar:d,setup:e,visible:b,width:a}}a.factory("sideBarService",b)}(IsyplusApp),function(a){function b(){function a(a){return(a||"").replace(/ /g,"")}function b(a){return(a||"").trim()}function c(a,b){return(a||"").replace(b,"")}function d(a){return c(a,/[^0-9a-zA-Z]/gi)}function e(a){return void 0!==a&&null!==a&&a.trim().length>0}return{limpiaEspacios:a,limpiaRegEx:c,soloNumLetras:d,trim:b,noNuloNoVacio:e}}a.factory("StringServ",b)}(IsyplusApp),function(a){function b(){function a(a,b,c){return{title:a||"Éxito",text:b||"",type:c}}function b(b,c,d){swal(a(d||"Éxito",b,"success"),c)}function c(b,c,d){swal(a(d||"Precaución",b,"warning"),c)}function d(b,c,d){swal(a(d||"Error",b,"error"),c)}function e(b,c,d){swal(a(d||"Información",b,"info"),c)}function f(a,b,c){swal({title:c||"¿Está seguro?",text:a||"",type:"warning",showCancelButton:!0,confirmButtonText:"OK",cancelButtonText:"Cancelar",closeOnConfirm:!0,closeOnCancel:!0},b)}var g={success:b,warning:c,error:d,info:e,confirm:f};return g}a.factory("swalService",b)}(IsyplusApp),function(a){function b(){this.es_decimal=function(a,b){var c,d,e,f,g,h=a[b];for(f=h.length-1;f>=0;f--){for(e=0,d=h.charAt(f),c=parseInt(d),g=0;g<h.length;g++)"."==h.charAt(g)&&e++;isNaN(c)&&"."!=d&&"-"!=d&&(h=h.substring(0,h.length-1)),"."==d&&e>1&&(h=h.substring(0,h.length-1)),"-"==d&&0!=f&&(h=h.substring(0,h.length-1))}a[b]=h},this.es_entero=function(a,b){var c,d,e,f,g,h=a[b];for(f=h.length-1;f>=0;f--){for(e=0,d=h.charAt(f),c=parseInt(d),g=0;g<h.length;g++)"."==h.charAt(g)&&e++;isNaN(c)&&"."!=d&&"-"!=d&&(h=h.substring(0,h.length-1)),"."==d&&e>0&&(h=h.substring(0,h.length-1)),"-"==d&&0!=f&&(h=h.substring(0,h.length-1))}a[b]=h}}a.service("ValidadoresServ",b)}(IsyplusApp),function(a){function b(a,b,c,d,e){function f(a,b){console.log("watch self.articulos--->",a)}function g(a,b){a&&e.setFocus("newPrintName",1500)}function h(){p.isHeadMarked=p.isHeadMarked?0:1,i(p.isHeadMarked),k()}function i(a){$.each(p.articulos,function(b,c){c.mark=a})}function j(a){a.mark=1===a.mark?0:1,k()}function k(){var a=m();p.isRowMarked=a&&a.length>0}function l(){if(p.newPrintName.length>0){var a=m();a&&a.length>0&&$.each(a,function(a,b){b.art_nomimp=p.newPrintName}),d.success("Nombre asignado"),n()}}function m(){return c.filtrar(p.articulos,{mark:1})}function n(){p.newPrintName="",p.isRowMarked=!1,p.isHeadMarked=0,i(p.isHeadMarked)}function o(){console.log("cerrar--->",p.elementid),b.hide(p.elementid)}var p=this;p.isRowMarked=!1,p.newPrintName="",p.isHeadMarked=0,p.ok=o,p.changeName=l,p.toggleRowMark=j,
p.toggleHeadMark=h,a.$watch("self.articulos",f),a.$watch("self.isRowMarked",g)}a.controller("ModalCmbNombreArtCntrl",b),b.$inject=["$scope","ModalServ","ListasServ","NotifServ","focusService"]}(IsyplusApp),function(a){function b(){return{restrict:"EA",replace:!0,templateUrl:"static/components/transacc/modalCmbNombreArts/modalCmbNombreArts.html?v="+globalgsvapp,scope:!0,bindToController:{elementid:"@",articulos:"="},controller:"ModalCmbNombreArtCntrl",controllerAs:"self"}}a.directive("modalCmbNombreArts",b)}(IsyplusApp),function(a){function b(a,b){function c(a,b){if(console.log("Cambio trn_codigo traer datos del servidor--->",a,b),a||0===a)var c=d.get({trn_codigo:a},function(){console.log("valor para res es:"),console.log(c)})}var d=a("/rest/transacc/resumen/:trn_codigo",{trn_codigo:"@trn_codigo"},{});b.$watch("self.trncodigo",c)}a.controller("ServiTrnResCntrl",b),b.$inject=["$resource","$scope"]}(IsyplusApp),function(a){function b(){return{restrict:"EA",replace:!0,templateUrl:"static/components/transacc/serviTrnResumen/serviTrnResumen.html?v="+globalgsvapp,scope:!0,bindToController:{trncodigo:"="},controller:"ServiTrnResCntrl",controllerAs:"self"}}a.directive("serviTrnResumen",b)}(IsyplusApp),function(){angular.module("isyplus").directive("capitalize",function(){return{require:"ngModel",link:function(a,b,c,d){var e=function(a){void 0==a&&(a="");var c=a.toUpperCase();if(c!==a){var e=b[0].selectionStart;d.$setViewValue(c),d.$render(),b[0].selectionStart=e,b[0].selectionEnd=e}return c};d.$parsers.push(e),e(a[c.ngModel])}}})}(),function(){function a(){return{restrict:"A",require:"ngModel",link:function(a,b,c){$(b).inputmask(a.$eval(c.inputMask)),b.on("click",function(){this.select()})}}}angular.module("isyplus").directive("inputMask",a)}(),function(){function NgAutocompCntrl($scope,$element,$attrs,$filter,$http,$timeout){$scope.tipo="n",$scope.uri="",$scope.indexitem=-1,$scope.itemsel={},$scope.filtro={},$scope.idprop="autocompletado",$scope.csscolor={color:"#000000"},$scope.csscolornull="#FF0000",$scope.filtrados=$scope.data,$scope.justone="F",$scope.nomoreajax=!1,$scope.placeholder="",$scope.auxfnsel=function(a){},$scope.propFiltro="label",$scope.fnSelItem=$scope.auxfnsel,$scope.fnOnNull=$scope.auxfnsel,$scope.fnOnEnterNull=$scope.auxfnsel,$scope.setup.propFiltro&&($scope.propFiltro=$scope.setup.propFiltro),$scope.labelExp="item."+$scope.propFiltro,$scope.setup.labelExp&&($scope.labelExp=$scope.setup.labelExp),$scope.setup.uri&&($scope.uri=$scope.setup.uri),$scope.setup.placeholder&&($scope.placeholder=$scope.setup.placeholder),$attrs.tipo&&($scope.tipo=$attrs.tipo),$scope.setup.fnonsel&&($scope.fnSelItem=eval($scope.setup.fnonsel)),$scope.setup.fnonnull&&($scope.fnOnNull=eval($scope.setup.fnonnull)),$scope.setup.fnOnEnterNull&&($scope.fnOnEnterNull=eval($scope.setup.fnOnEnterNull)),$scope.setup.idprop&&($scope.idprop=$scope.setup.idprop),$scope.setup.jo&&($scope.justone=$scope.setup.jo),$scope.setup.colornull&&($scope.csscolornull=$scope.setup.colornull),$element.find(".suggestbox").hide(),$element.find(".form-control").bind("blur",function(a){$scope.filtrados=[]}),$scope.modelToFiltro=function(){$scope.filtro[$scope.propFiltro]=$scope.model[$scope.propFiltro]},$scope.conf_posancho=function(a){var b=$element.find(".input-groupdd"),c=b.offset(),d=b.outerHeight(),e=b.css("width");c.top=c.top+d;var f=$element.find(".suggestbox");f.offset(c),f.css("width",e),a?f.show():f.hide()},$scope.sel_item=function(a){$scope.csscolor={color:"#000000"},$scope.model=a,$scope.filtrados=[],$scope.indexitem=-1,$scope.itemsel={},$scope.nomoreajax=!1;try{$timeout(function(){$scope.fnSelItem(a)})}catch(b){console.error(" Error al ejecutar función ")}},$scope.listener_null=function(a){$scope.indexitem=-1,$scope.itemsel={},$scope.model={},$scope.model=$scope.filtro,$scope.nomoreajax=!1;try{$timeout(function(){$scope.fnOnNull(a)})}catch(b){console.error(" Error al ejecutar función ")}},$scope.logica_filtrados=function(a){var b=$scope.filtrados.length;b>0?($scope.csscolor={color:"#000000"},1==b&&"T"==$scope.justone?$scope.sel_item($scope.filtrados[0]):$scope.filtro[$scope.propFiltro]&&$scope.filtro[$scope.propFiltro].length>0?($scope.itemsel=$scope.filtrados[0],$scope.indexitem=0):($scope.indexitem=-1,$scope.itemsel={})):($scope.csscolor={color:$scope.csscolornull},$scope.listener_null($scope.filtro),a&&($scope.nomoreajax=!0))},$scope.doAjax=function(){if($scope.nomoreajax)$scope.listener_null($scope.filtro);else{var a=$scope.uri+"&filtro="+$scope.filtro[$scope.propFiltro];$http.get(a).then(function(a){a.data.items&&($scope.filtrados=a.data.items,$scope.logica_filtrados(!0))})}},$scope.nav_items_sugg=function(a){$scope.indexitem=$scope.indexitem+a,$scope.itemsel=$scope.filtrados[$scope.indexitem]},$scope.evalExpress=function(item,express){var item=item,res="";try{res=eval(express)}catch(e){res=$scope.label}return res},$scope.onkeydown=function(a){if($scope.conf_posancho(!0),38==a.keyCode)$scope.indexitem>0&&$scope.nav_items_sugg(-1);else if(40==a.keyCode)$scope.indexitem+1<$scope.filtrados.length&&$scope.nav_items_sugg(1);else if(13==a.keyCode)if($scope.itemsel[$scope.propFiltro])$scope.sel_item($scope.itemsel);else try{$scope.fnOnEnterNull()}catch(b){console.error(" Error al ejecutar función ")}else 27==a.keyCode?($scope.indexitem=-1,$scope.itemsel={},$scope.filtrados=[]):46!=a.keyCode&&8!=a.keyCode||($scope.listener_null($scope.filtro),$scope.nomoreajax=!1,"n"==$scope.tipo&&($scope.filtrados=$filter("filter")($scope.data,$scope.filtro,function(a,b){return 0==a.toLowerCase().indexOf(b.toLowerCase())})))},$scope.onkeyup=function(a){$scope.conf_posancho(!0),(a.keyCode>=65&&a.keyCode<=90||a.keyCode>=48&&a.keyCode<=57||a.keyCode>=96&&a.keyCode<=105)&&("x"==$scope.tipo?$scope.doAjax():"n"==$scope.tipo&&($scope.filtrados=$filter("filter")($scope.data,$scope.filtro,function(a,b){return 0==a.toLowerCase().indexOf(b.toLowerCase())}),$scope.logica_filtrados(!1)))},$scope.limpiar=function(){$scope.filtro[$scope.propFiltro]="",$scope.listener_null(),$("#"+$scope.idprop).focus()},$scope.$watch("model",function(a,b){$scope.modelToFiltro()}),$scope.conf_posancho(!1)}angular.module("isyplus").controller("NgAutocompCntrl",NgAutocompCntrl),NgAutocompCntrl.$inject=["$scope","$element","$attrs","$filter","$http","$timeout"]}(),function(){function a(){return{restrict:"A",scope:{data:"=",model:"=",setup:"="},controller:"NgAutocompCntrl",templateUrl:"static/components/ui/ngAutocomp/ngAutocomtemplate.html?v="+globalgsvapp}}angular.module("isyplus").directive("ngAutocomp",a)}(),function(){function a(a,b,c){return{restrict:"E",templateUrl:"static/components/ui/ngComplete/ngComplete.html?v="+globalgsvapp,scope:{lstdatos:"=",model:"=",func:"=",funcchg:"=",required:"=",filtro:"@",url:"@",placeholder:"@",vertitle:"=",group:"=",disabled:"=",elementid:"@"},link:function(d,e,f){function g(){void 0===d.elementid&&(d.elementid="ngcomplete")}d.form={},d.form.lstdatos=[],d.form.lstaux=[],d.form.indice=0,d.form.busqueda="",d.form.funcejec=!1,d.form.borrado=!1,d.form.tipfilt=1,d.form.nomfilt="Filtro",g(),d.group&&d.group.dropdown&&(d.form.tipfilt=d.group.dropdown[0].codigo,d.form.nomfilt=d.group.dropdown[0].label),d.checkKeyDown=function(a){13===a.keyCode&&(a.preventDefault(),d.model&&Object.keys(d.model)&&0===Object.keys(d.model).length&&d.setModel(d.form.indice))},d.checkKeyUp=function(a){d.form.funcejec=!1,d.form.borrado=!1,40===a.keyCode?(a.preventDefault(),d.form.indice+1!==d.form.lstaux.length&&d.form.indice++):38===a.keyCode?(a.preventDefault(),d.form.indice-1!==-1&&d.form.indice--):13===a.keyCode?(a.preventDefault(),d.model&&Object.keys(d.model)&&0===Object.keys(d.model).length&&d.setModel(d.form.indice)):d.form.busqueda&&d.form.busqueda.length>0?(d.getNewList(),8!==a.keyCode&&46!==a.keyCode||(d.form.borrado=!0)):d.resetear(),d.funcchg&&b(function(){d.funcchg()},0)},d.setModel=function(a){d.form.lstaux.length>0?(d.model=d.form.lstaux[a],d.form.busqueda=d.model[d.filtro],d.form.lstaux=[],d.form.indice=0,d.func&&b(function(){d.form.funcejec=!0,d.func(d.model)},0)):d.form.busqueda!==d.model[d.filtro]&&d.resetear()},d.getNewList=function(){d.url&&0===d.form.lstdatos.length?c.get(d.url+"&filtro="+d.form.busqueda+"&tipfilt="+d.form.tipfilt).then(function(a){d.form.lstaux=a.data.items,d.form.indice=0}):d.form.lstdatos.length>0&&(d.form.lstaux=a("filter")(d.form.lstdatos,d.form.busqueda),d.form.indice>=d.form.lstaux.length&&(d.form.indice=0)),0===d.form.lstaux.length&&d.resetear(),d.model&&d.form.busqueda!==d.model[d.filtro]&&(d.model={})},d.$watchCollection("lstdatos",function(a,b){d.lstdatos&&a&&(d.form.lstdatos=a)}),d.$watch("model",function(a,b){if(a&&b&&a[d.filtro]!==b[d.filtro]&&(!a[d.filtro]&&d.form.funcejec?d.form.busqueda="":a[d.filtro]||d.form.borrado===!1&&(d.form.busqueda="")),a&&b&&a[d.filtro]){var c=d.existObj(a);c!==-1&&(d.model=d.form.lstdatos[c],d.form.busqueda=d.model[d.filtro],d.form.lstaux=[],d.form.indice=0),d.url&&(d.form.busqueda=d.model[d.filtro],d.form.lstaux=[],d.form.indice=0)}}),d.existObj=function(a){if(d.form.lstdatos&&void 0!==a)for(var b in d.form.lstdatos)if(angular.equals(a,d.form.lstdatos[b]))return b;return-1},d.resetear=function(){d.form.lstaux=[],d.model={},d.form.indice=0},d.onclickFiltro=function(a,b){d.form.tipfilt=b,d.form.nomfilt=a}}}}angular.module("isyplus").directive("ngComplete",a),a.$inject=["$filter","$timeout","$http"]}(),function(){function a(){return{restrict:"A",link:function(a,b,c){b.on("keydown",function(b){13===b.which&&(a.$apply(function(){a.$eval(c.ngEnter)}),b.preventDefault())})}}}angular.module("isyplus").directive("ngEnter",a)}(),function(){function a(a){return{restrict:"E",templateUrl:"static/components/ui/ngImgupload/ngImgupload.html?v="+globalgsvapp,scope:{model:"=",imgsrc:"@"},link:function(b,c,d){b.form={},b.form.rutaimg="static/img/public/logo_isyplus_reducido.png",b.form.imagen=document.getElementById("img"),b.model&&""!==b.model?b.form.imagen.src=b.model:b.imgsrc?b.form.imagen.src=b.imgsrc:b.form.imagen.src=b.form.rutaimg,b.setFile=function(){var a=new FileReader;a.readAsDataURL(document.getElementById("inputimg").files[0]),a.onload=function(a){b.$apply(function(){b.model=a.target.result,b.form.imagen.src=b.model})}},b.quitaImagen=function(){a(function(){b.$apply(function(){b.model="",b.form.imagen.src=b.form.rutaimg})},0)}}}}angular.module("isyplus").directive("ngImgupload",a),a.$inject=["$timeout"]}(),function(){function a(a){return{restrict:"E",transclude:!0,templateUrl:"static/components/ui/ngOpcbusq/ngOpcbusq.html?v="+globalgsvapp,scope:{filtros:"=",listaopc:"=",parametros:"=",listatdocs:"=",opciondoc:"=",fncbusq:"=",ini:"=",funasignardoc:"=",funcfil:"=",lstitbusq:"=",titdoc:"@",fnonchangefecha:"="},link:function(b,c,d){b.titbusq="Busquedas por: ",b.opendocs=!1,b.searchFilter=b.searchFilter||"",b.buscarDocs=b.buscarDocs||"",b.$watchCollection("listaopc",function(a,c){0===a.length&&b.limpiartitbusq()}),b.inicializar=function(a){for(var c=0;c<a.length;c++)a[c].sel=!1;b.opendocs=!1,b.concatTitbusq()},b.limpiartitbusq=function(a,c){var d=!1;c&&(d=!0,"select"!==b.filtros[c].tipo&&"find"!==b.filtros[c].tipo&&"monto"!==b.filtros[c].tipo&&"text"!==b.filtros[c].tipo||1!==b.listaopc[c]||(d=!1)),d&&b.fncbusq(),b.concatTitbusq()},b.concatTitbusq=function(){b.titbusq="Busquedas por : ";for(var a in b.lstitbusq)""!=b.lstitbusq[a]&&(b.titbusq=b.titbusq+b.lstitbusq[a],b.titbusq=b.titbusq+" - ");b.titbusq=b.titbusq.substring(0,b.titbusq.length-3)},b.$watchCollection("filtros.lstselect",function(a,b){}),b.$watchCollection("filtros",function(a,b){}),b.$watch("filtros.opcmodel",function(a,b){}),b.$watch("parametros",function(a,b){}),b.$watchCollection("lstitbusq",function(a,c){b.concatTitbusq()}),b.$watchCollection("listatdocs",function(a,c){if(a)for(var d=0;d<a.length;d++)a[d].tra_codigo===b.opciondoc?a[d].sel=!0:a[d].sel=!1}),b.foco=function(b){a(function(){document.getElementById(b).focus()})}}}}angular.module("isyplus").directive("ngOpcbusq",a),a.$inject=["$timeout"]}(),function(){function a(){return{restrict:"E",transclude:!0,templateUrl:"static/components/ui/ngOpcproyecto/ngOpcproyecto.html?v="+globalgsvapp,scope:{params:"=",setup:"=",lstproyectosselecs:"="},link:function(a,b,c){console.log("llega a ngOpcProyecto "),a.params.opclocal=a.params.opclocal?a.params.opclocal:1,a.show_modal_proyectos=function(){setTimeout(function(){a.$broadcast("show_modal_centrocosto",{selecvarios:!0,proyectosselecs:a.lstproyectosselecs,pry_estado:0,onhide:a.onChangeopclocal}),console.log("pasa show modal")})},a.getProyectSelectCadena=function(){var b="";for(var c in a.lstproyectosselecs)b=b+a.lstproyectosselecs[c].pry_codigo+",";return b=b.substring(0,b.length-1)},a.$watch("params",function(b,c){b&&(console.log("llega new val de paramas"),a.params=b,console.log(a.params))}),a.$watchCollection("lstproyectosselecs",function(b,c){b&&(a.lstproyectosselecs=b,a.params.proyectosselecs=a.getProyectSelectCadena())}),a.$watch("setup",function(b,c){b&&b&&(console.log("llega setup"),console.log(c),console.log(b),a.setup=b,a.alm_descri=b.alm_descri,a.abremodal=b.abremodal,a.onChangeopclocal=b.onChangeopclocal,a.tituloproyecto=b.label,a.params.proyectosselecs=a.getProyectSelectCadena(),1===a.params.acf_useproyecto&&a.abremodal&&a.show_modal_proyectos(),2===a.params.acf_useproyecto&&(console.log("acf_useproyecto es 2"),a.onChangeopclocal()))})}}}angular.module("isyplus").directive("ngOpcproyecto",a)}(),function(){function a(a){a.auxfnrango=function(a){},a.auxfnenter=function(){},a.fnonchange=a.auxfnenter,a.fnondesdeenter=a.auxfnenter,a.fnondesdeblur=a.auxfnenter,a.fnonhastaenter=a.auxfnenter,a.fnonhastablur=a.auxfnenter,a.idpropdesde="desde",a.idprophasta="hasta",a.setup.fnonchange&&(a.fnonchange=a.setup.fnonchange),a.setup.fnondesdeenter&&(a.fnondesdeenter=a.setup.fnondesdeenter),a.setup.fnondesdeblur&&(a.fnondesdeblur=a.setup.fnondesdeblur),a.setup.fnonhastaenter&&(a.fnonhastaenter=a.setup.fnonhastaenter),a.setup.fnonhastablur&&(a.fnonhastablur=a.setup.fnonhastablur),a.setup.idpropdesde&&(a.idpropdesde=a.setup.idpropdesde),a.setup.idprophasta&&(a.idprophasta=a.setup.idprophasta),a.formatMoment=function(a){return a.format("DD/MM/YYYY")},a.hoy=function(){var b=moment();return{desde:a.formatMoment(b),hasta:a.formatMoment(b)}},a.ayer=function(){var b=moment(),c=b.add("days",-1);return{desde:a.formatMoment(c),hasta:a.formatMoment(c)}},a.semana=function(){var b=moment();return{desde:a.formatMoment(b.startOf("week").add("days",1)),hasta:a.formatMoment(b.endOf("week").add("days",1))}},a.mes=function(){var b=moment();return{desde:a.formatMoment(b.startOf("month")),hasta:a.formatMoment(b.endOf("month"))}},a.mesant=function(){var b=moment(),c=b.add("month",-1);return{desde:a.formatMoment(c.startOf("month")),hasta:a.formatMoment(c.endOf("month"))}},a.anio=function(){var b=moment();return{desde:a.formatMoment(b.startOf("year")),hasta:a.formatMoment(b.endOf("year"))}},a.futuro=function(){var b=moment();return{desde:a.formatMoment(b),hasta:a.formatMoment(b.add("year",1))}},a.sigsem=function(){var b=moment(),c=b.add("week",1);return{desde:a.formatMoment(c.startOf("week").add("days",1)),hasta:a.formatMoment(c.endOf("week").add("days",1))}},a.getRangoFechas=function(b){return"hoy"===b?a.hoy():"ayer"===b?a.ayer():"semana"===b?a.semana():"mes"===b?a.mes():"mesant"===b?a.mesant():"anio"===b?a.anio():"futuro"===b?a.futuro():"sigsem"===b?a.sigsem():void 0},a.cambiarFecha=function(b){try{var c=a.getRangoFechas(b);a.form.desde=c.desde,a.form.hasta=c.hasta,a.fnonchange()}catch(d){console.error("Error al tratar de obtener valores de fechas"),console.error(d)}}}angular.module("isyplus").controller("NgRangoFechasCntrl",a),a.$inject=["$scope"]}(),function(){function a(){return{restrict:"E",scope:{form:"=",setup:"=",disabled:"="},controller:"NgRangoFechasCntrl",templateUrl:"static/components/ui/ngRangofechas/ngRangofechas.html?v="+globalgsvapp}}angular.module("isyplus").directive("ngRangofechas",a)}(),function(){function a(){return function(a,b){if("number"==typeof a)try{return a.toFixed(b)}catch(c){}return a}}angular.module("isyplus").filter("ifNumberFormat",a)}(),function(){function NgSegridCntrl($scope,$filter,$element){$scope.search={},$scope.labelprop="label",$scope.valueprop="prop",$scope.totalprop="tot",$scope.cssrowexp="",$scope.labelbtndet="Detalles",$scope.expbtndet="true",$scope.filtot="F",$scope.reverse=!1,$scope.filtro="T",$scope.coldet=!1,$scope.fillink="",$scope.paginado="T",$scope.head="T",$scope.showtotal="T",$scope.fnbtnsel=$scope.auxfnfila,$scope.fnbtnedit=$scope.auxfnfila,$scope.fnbtndel=$scope.auxfnfila,$scope.fnbtnadc=$scope.auxfnfila,$scope.labelbtnsel="'Elegir'",$scope.labelbtnedit="'Editar'",$scope.labelbtndel="'Quitar'",$scope.labelbtnadc="'Accion'",$scope.btnsel=!1,$scope.btnedit=!0,$scope.btndel=!1,$scope.btnadc=!1,$scope.icobtnsel=!0,$scope.icobtnedit=!0,$scope.icobtndel=!0,$scope.currentdat=void 0,$scope.colinfo&&($scope.colinfo.labelprop&&($scope.labelprop=$scope.colinfo.labelprop,$scope.valueprop=$scope.colinfo.valueprop),$scope.colinfo.totalprop&&($scope.totalprop=$scope.colinfo.totalprop),$scope.colinfo.cssrowexp&&($scope.cssrowexp=$scope.colinfo.cssrowexp),$scope.colinfo.labelbtnsel&&($scope.labelbtnsel=$scope.colinfo.labelbtnsel),$scope.colinfo.btnsel&&($scope.btnsel=$scope.colinfo.btnsel),$scope.colinfo.labelbtnedit&&($scope.labelbtnedit=$scope.colinfo.labelbtnedit),$scope.colinfo.btnedit&&($scope.btnedit=$scope.colinfo.btnedit),$scope.colinfo.labelbtndel&&($scope.labelbtndel=$scope.colinfo.labelbtndel),$scope.colinfo.btndel&&($scope.btndel=$scope.colinfo.btndel),$scope.colinfo.labelbtnadc&&($scope.labelbtnadc=$scope.colinfo.labelbtnadc),$scope.colinfo.btnadc&&($scope.btnadc=$scope.colinfo.btnadc),$scope.colinfo.filtot&&($scope.filtot=$scope.colinfo.filtot),$scope.colinfo.filtro&&($scope.filtro=$scope.colinfo.filtro),$scope.colinfo.head&&($scope.head=$scope.colinfo.head),$scope.colinfo.paginado&&($scope.paginado=$scope.colinfo.paginado),$scope.colinfo.icobtnedit&&($scope.icobtnedit=$scope.colinfo.icobtnedit),$scope.colinfo.icobtndel&&($scope.icobtndel=$scope.colinfo.icobtndel),$scope.colinfo.icobtnsel&&($scope.icobtnsel=$scope.colinfo.icobtnsel),$scope.colinfo.showtotal&&($scope.showtotal=$scope.colinfo.showtotal)),$scope.colorder="",$scope.reverse=!1,$scope.pagobj={pagactual:0,totpag:1,totitems:0,rto:0,pagmodel:1,nnfilas:$scope.filas,inputpag:1},$scope.totales={},"T"===$scope.colinfo.coldet&&($scope.coldet=!0);try{$scope.fnbtnsel=eval($scope.colinfo.fnbtnsel)}catch(e){$scope.fnbtnsel=$scope.auxfnfila}try{$scope.fnbtnedit=eval($scope.colinfo.fnbtnedit)}catch(e){$scope.fnbtnedit=$scope.auxfnfila}try{$scope.fnbtndel=eval($scope.colinfo.fnbtndel)}catch(e){$scope.fnbtndel=$scope.auxfnfila}try{$scope.fnbtnadc=eval($scope.colinfo.fnbtnadc)}catch(e){$scope.fnbtnadc=$scope.auxfnfila}try{$scope.fnrow=eval($scope.colinfo.fnrow),"fnrow"in $scope.colinfo?$scope.fillink="cursor: pointer; cursor: hand;":$scope.fillink=""}catch(e){$scope.fnrow=$scope.auxfnfila}$scope.onfilter=function(){var a=$filter("filter")($scope.datos,$scope.search);$scope.currentdat=a,$scope.calcularNumPag()},$scope.limpiarFiltro=function(){$scope.search={},$scope.onfilter()},$scope.auxfnfila=function(a){alert("Aux fila")},$scope.$watchCollection("datos",function(a,b){$scope.search={},$scope.currentdat=a,$scope.calcularNumPag()}),$scope.filasops=[{id:5,label:5},{id:10,label:10},{id:25,label:25},{id:50,label:50},{id:100,label:100}],$scope.crto=function(){var a=($scope.pagobj.pagactual+1)*$scope.pagobj.nnfilas;$scope.pagobj.rto=Math.min($scope.pagobj.totitems,a),$scope.pagobj.inputpag=$scope.pagobj.pagactual+1},$scope.calcularNumPag=function(){var a=$scope.currentdat,b=1;"F"==$scope.paginado&&a&&($scope.pagobj.nnfilas=a.length),a&&(b=Math.ceil(a.length/$scope.pagobj.nnfilas)),"T"==$scope.paginado?$scope.pagobj.totpag=b:$scope.pagobj.totpag=1,$scope.pagobj.pagactual=0,$scope.pagobj.totitems=a.length,$scope.crto()},$scope.setColOrder=function(a){$scope.colorder=a,$scope.reverse=!$scope.reverse},$scope.pfirst=function(){$scope.pagobj.pagactual=0,$scope.crto()},$scope.plast=function(){$scope.pagobj.pagactual=$scope.pagobj.totpag-1,$scope.crto()},$scope.pnext=function(){$scope.pagobj.pagactual<$scope.pagobj.totpag-1&&($scope.pagobj.pagactual=$scope.pagobj.pagactual+1,$scope.crto(),$("html, body").animate({scrollTop:$element.offset().top},250))},$scope.pback=function(){$scope.pagobj.pagactual>0&&($scope.pagobj.pagactual=$scope.pagobj.pagactual-1,$scope.crto(),$("html, body").animate({scrollTop:$element.offset().top},250))},$scope.setNumPag=function(){try{$scope.pagobj.inputpag>0&&$scope.pagobj.inputpag<=$scope.pagobj.totpag?$scope.pagobj.pagactual=$scope.pagobj.inputpag-1:alert("Valor incorrecto")}catch(a){console.log("Error al setear pagina"),console.log(a)}},$scope.evalExpress=function(fil,express){var fil=fil,res="";try{res=eval(express)}catch(e){res=express}return res},$scope.get_col_align=function(a){var b="text-left";return $.isNumeric(a)&&(b="text-right"),b}}angular.module("isyplus").controller("NgSegridCntrl",NgSegridCntrl),NgSegridCntrl.$inject=["$scope","$filter","$element"]}(),function(){function a(){return{restrict:"A",scope:{cols:"=",datos:"=",titulo:"@",filas:"=",colinfo:"="},controller:"NgSegridCntrl",templateUrl:"static/components/ui/ngSegrid/ngSegridtemplate.html?v="+globalgsvapp,link:function(a,b,c){}}}angular.module("isyplus").directive("ngSegrid",a)}(),function(){function a(){return function(a,b,c){return a?a.slice(parseInt(b*c),parseInt((b+1)*c+1)-1):a}}angular.module("isyplus").filter("paginarFiltro",a)}(),function(){function a(){return function(a,b){try{if("undefined"==typeof a||"undefined"==typeof b)return 0;for(var c=0,d=a.length-1;d>=0;d--)c+=parseFloat(a[d][b]);return c}catch(e){return 0}}}angular.module("isyplus").filter("totArrayFilter",a)}(),function(){function a(a,b,c){return{restrict:"E",transclude:!0,templateUrl:"static/components/ui/ngTable/ngTable.html?v="+globalgsvapp,scope:{ocultacab:"@",titulo:"@",id:"@",clspnl:"@",busq:"@",pag:"@",ordenar:"@",filterby:"@",onclickcolheader:"=",txthead:"=",scroll:"=",numdatos:"=",lstdatos:"=",lstcols:"=",rowopc:"=",colopc:"=",checks:"=",lstopcchecks:"=",botones:"=",filtros:"=",selectgen:"=",totales:"=",funcchg:"=",modelfilt:"=",paginacion:"=",funcpag:"=",striped:"=",drpdwnhead:"=",funccombo:"=",footopc:"=",botongeneral:"=",funcbtncol:"=",objetodevolver:"="},link:function(b,c,d){b.busqueda={},b.form={},b.form.titulo="Resultados",b.form.id="",b.form.clspnl="panel-primary",b.form.numdatos=0,b.form.currentPage=0,b.form.nroPags=1,b.form.pageSize=30,b.form.optpags=[10,20,30,40,50,60,70,80,90,100],b.form.rowopc={},b.form.colopc={},b.form.txthead={},b.form.checks=null,b.form.lstopcchecks=null,b.form.filtros=null,b.form.selectgen=null,b.form.botongeneral=null,b.form.botones=null,b.form.totales=[],b.form.busq=!0,b.form.pag=!0,b.form.selec=0,b.form.scroll=null,b.form.reverse=!1,b.form.predicate="",b.form.ordenar=!0,b.form.cont=0,b.form.filterby="$",b.fecha=moment().format("DD/MM/YYYY"),b.titulo&&(b.form.titulo=b.titulo),b.id&&(b.form.id=b.id),b.clspnl&&(b.form.clspnl=b.clspnl),b.rowopc&&(b.form.rowopc=b.rowopc),b.colopc&&(b.form.colopc=b.colopc),b.checks&&(b.form.checks=b.checks),b.lstopcchecks&&(b.form.lstopcchecks=b.lstopcchecks),b.botones&&(b.form.botones=b.botones),b.botongeneral&&(b.form.botongeneral=b.botongeneral),b.filtros&&(console.log("llega filtros"),console.log(b.filtros),b.form.filtros=b.filtros),b.selectgen&&(console.log("llega selectgen"),console.log(b.selectgen),b.form.selectgen=b.selectgen),b.busq&&(b.form.busq=b.busq),b.pag&&(b.form.pag=b.pag),b.scroll&&(b.form.scroll=b.scroll),b.ordenar&&(b.form.ordenar=b.ordenar),b.paginacion&&b.paginacion%10===0&&(b.form.pageSize=b.paginacion),b.filterby&&(b.form.filterby=b.filterby),b.txthead&&(b.form.txthead=b.txthead),b.$watchCollection("lstcols",function(a,c){b.lstcols&&a&&(b.form.lstcols=a)}),b.$watchCollection("lstdatos",function(a,c){b.lstdatos&&a&&(b.form.lstdatos=a,b.form.currentPage=0,b.numberOfPages(),b.numdatos||(b.form.numdatos=b.form.lstdatos.length))}),b.$watchCollection("totales",function(a,c){b.totales&&a&&(b.form.totales=a)}),b.$watch("numdatos",function(a,c){b.numdatos&&(b.form.numdatos=a)}),b.$watch("titulo",function(a,c){b.titulo&&(b.form.titulo=a)}),b.$watch("objetodevolver",function(a,c){b.objetodevolver&&(b.form.objetodevolver=a)}),b.$watchCollection("selectgen.lstselect",function(a,c){b.form.selectgen&&(b.form.selectgen.lstselect=a)}),b.$watch("modelfilt",function(a,c){void 0!=a&&(b.busqueda[b.form.filterby]=a)}),b.$watch("checks.chkAll",function(a,c){b.form.checks&&(b.form.checks.chkAll=a)}),b.numberOfPages=function(){b.form.nroPags=Math.ceil(b.form.lstdatos.length/b.form.pageSize)},b.setCurrentPage=function(a){b.form.currentPage=a},b.setSelec=function(a){b.form.selec=a,b.form.selectgen&&(b.form.selectgen.model="")},b.onChgBusqueda=function(a){void 0!==b.modelfilt&&(b.modelfilt=a),b.funcchg&&b.funcchg()},b.setOrder=function(c){b.form.reverse=!b.form.reverse,b.form.predicate=c,b.objetodevolver&&(b.objetodevolver.reverse=b.form.reverse,b.objetodevolver.predicate=b.form.predicate,console.log(b.objetodevolver)),b.form.ordenar===!0&&(b.form.lstdatos=a("orderBy")(b.form.lstdatos,b.form.predicate,b.form.reverse))},b.fnTrackBy=function(a,b){return a.$index_row=b,a.$index_row},b.filtrar=function(b,c){var d=b.split(":");return"$"===b?b+c:"%"===b?c+b:1===d.length?a(d[0])(c):2===d.length?a(d[0])(c,d[1]):3===d.length?a(d[0])(c,d[1],d[2]):void 0},b.setIdCol=function(a,c){return b.form.id+"c"+a+c},b.onKeyUpColEdit=function(a,b,c,d){},b.onKeyDownColEdit=function(a,c,d,e){var f=document.getElementById(b.form.id+"c"+c+d),g=f.selectionStart;if(13===a.keyCode)b.form.colopc.funckeyenter&&(b.form.colopc.funckeyenter(),document.activeElement.blur());else if(37===a.keyCode){if(d>0&&0===g){var h=b.form.id+"c"+c+(d-1),i=document.getElementById(h);i&&(a.preventDefault(),i.focus())}}else if(38===a.keyCode){if(a.preventDefault(),c>0){var j=b.form.id+"c"+(c-1)+d,i=document.getElementById(j);i&&i.focus()}}else if(39===a.keyCode){if(d<b.form.lstcols.length&&g===e.toString().length){var h=b.form.id+"c"+c+(d+1),i=document.getElementById(h);i&&(a.preventDefault(),i.focus())}}else if(40===a.keyCode&&(a.preventDefault(),c<b.form.pageSize)){var j=b.form.id+"c"+(c+1)+d,i=document.getElementById(j);i&&i.focus()}},b.gotoUp=function(){$("html, body").animate({scrollTop:c.offset().top},250)},b.setOtrStyle=function(a){var c="";return c+=a.width&&!b.form.scroll?"width: "+a.width:"",c+=b.form.scroll?"white-space: nowrap":""},b.onchecklista=function(a,b){for(var c=0;c<a.length;c++)b.valor!=a[c].valor&&(a[c].sel=!1);b.sel=!b.sel},b.asiganachecksprop=function(a){console.log("entra asiganachecksprop");var c=0;if(a.check.selectall=!a.check.selectall||!1,a.check.selectall)for(c;c<b.form.lstdatos.length;c++)b.form.lstdatos[c][a.prop]=a.check.valuecheck;else for(c;c<b.form.lstdatos.length;c++)b.form.lstdatos[c][a.prop]=a.check.valuenocheck},b.clickcolheader=function(a){b.onclickcolheader?b.onclickcolheader(a):console.log("no se ha declarado la funcion onclickcolheader")},b.cambiaCheck=function(a,b){b.check.selectall=!1,a[b.prop]===b.check.valuecheck?(a[b.prop]=b.check.valuenocheck,console.log("Info en check:prop valuechech valuenochek-->"),console.log(b.prop),console.log(b.check.valuecheck),console.log(b.check.valuenocheck)):a[b.prop]=b.check.valuecheck}}}}angular.module("isyplus").directive("ngTable",a),a.$inject=["$filter","$anchorScroll","$location"]}(),function(){function a(a,b,c){return{restrict:"E",transclude:!0,templateUrl:"static/components/ui/ngTablescrollv/ngTablescrollv.html?v="+globalgsvapp,scope:{ocultacab:"@",titulo:"@",id:"@",clspnl:"@",busq:"@",ordenar:"@",filterby:"@",onclickcolheader:"=",txthead:"=",numdatos:"=",lstdatos:"=",lstcols:"=",rowopc:"=",colopc:"=",checks:"=",lstopcchecks:"=",botones:"=",filtros:"=",selectgen:"=",totales:"=",funcchg:"=",modelfilt:"=",striped:"=",drpdwnhead:"=",funccombo:"=",footopc:"=",botongeneral:"=",btndropdown:"=",funcbtncol:"=",objetodevolver:"=",maxheight:"="},link:function(b,c,d){b.busqueda={},b.form={},b.form.titulo="Resultados",b.form.id="",b.form.clspnl="panel-primary",b.form.numdatos=0,b.form.rowopc={},b.form.colopc={},b.form.txthead={},b.form.checks=null,b.form.lstopcchecks=null,b.form.filtros=null,b.form.selectgen=null,b.form.botongeneral=null,b.form.btndropdown=null,b.form.botones=null,b.form.totales=[],b.form.busq=!0,b.form.selec=0,b.form.reverse=!1,b.form.predicate="",b.form.ordenar=!0,b.form.cont=0,b.form.filterby="$",b.form.maxheight="300",b.fecha=moment().format("DD/MM/YYYY"),b.titulo&&(b.form.titulo=b.titulo),b.id&&(b.form.id=b.id),b.clspnl&&(b.form.clspnl=b.clspnl),b.rowopc&&(b.form.rowopc=b.rowopc),b.colopc&&(b.form.colopc=b.colopc),b.checks&&(b.form.checks=b.checks),b.lstopcchecks&&(b.form.lstopcchecks=b.lstopcchecks),b.botones&&(b.form.botones=b.botones),b.botongeneral&&(b.form.botongeneral=b.botongeneral),console.log("scope.btndropdown"),console.log(b.btndropdown),b.btndropdown&&(b.form.btndropdown=b.btndropdown),b.filtros&&(console.log("llega filtros"),console.log(b.filtros),b.form.filtros=b.filtros),b.selectgen&&(console.log("llega selectgen"),console.log(b.selectgen),b.form.selectgen=b.selectgen),b.busq&&(b.form.busq=b.busq),b.ordenar&&(b.form.ordenar=b.ordenar),b.filterby&&(b.form.filterby=b.filterby),b.txthead&&(b.form.txthead=b.txthead),b.maxheight&&(b.form.maxheight=b.maxheight),b.$watchCollection("lstcols",function(a,c){b.lstcols&&a&&(b.form.lstcols=a)}),b.$watchCollection("lstdatos",function(a,c){if(b.lstdatos&&a){b.form.lstdatos=a,b.numdatos||(b.form.numdatos=b.form.lstdatos.length);var d=document.getElementById("clscroll-column-headers-tra").style;console.log("cambia padding"),d.paddingRight="0px"}}),b.$watchCollection("totales",function(a,c){b.totales&&a&&(b.form.totales=a)}),b.$watch("numdatos",function(a,c){b.numdatos&&(b.form.numdatos=a)}),b.$watch("titulo",function(a,c){b.titulo&&(b.form.titulo=a)}),b.$watch("objetodevolver",function(a,c){b.objetodevolver&&(b.form.objetodevolver=a)}),b.$watchCollection("selectgen.lstselect",function(a,c){b.form.selectgen&&(b.form.selectgen.lstselect=a)}),b.$watch("modelfilt",function(a,c){void 0!=a&&(b.busqueda[b.form.filterby]=a)}),b.$watch("checks.chkAll",function(a,c){b.form.checks&&(b.form.checks.chkAll=a)}),b.setSelec=function(a){b.form.selec=a,b.form.selectgen&&(b.form.selectgen.model="")},b.onChgBusqueda=function(a){void 0!==b.modelfilt&&(b.modelfilt=a),b.funcchg&&b.funcchg()},b.setOrder=function(c){b.form.reverse=!b.form.reverse,b.form.predicate=c,b.objetodevolver&&(b.objetodevolver.reverse=b.form.reverse,b.objetodevolver.predicate=b.form.predicate,console.log(b.objetodevolver)),b.form.ordenar===!0&&(b.form.lstdatos=a("orderBy")(b.form.lstdatos,b.form.predicate,b.form.reverse))},b.fnTrackBy=function(a,b){return a.$index_row=b,a.$index_row},b.filtrar=function(b,c){var d=b.split(":");return"$"===b?b+c:"%"===b?c+b:1===d.length?a(d[0])(c):2===d.length?a(d[0])(c,d[1]):3===d.length?a(d[0])(c,d[1],d[2]):void 0},b.setIdCol=function(a,c){return b.form.id+"c"+a+c},b.onKeyUpColEdit=function(a,b,c,d){},b.gotoUp=function(){$("html, body").animate({scrollTop:c.offset().top},250)},b.onchecklista=function(a,b){for(var c=0;c<a.length;c++)b.valor!=a[c].valor&&(a[c].sel=!1);b.sel=!b.sel},b.asiganachecksprop=function(a){console.log("entra asiganachecksprop");var c=0;if(a.check.selectall=!a.check.selectall||!1,a.check.selectall)for(c;c<b.form.lstdatos.length;c++)b.form.lstdatos[c][a.prop]=a.check.valuecheck;else for(c;c<b.form.lstdatos.length;c++)b.form.lstdatos[c][a.prop]=a.check.valuenocheck},b.clickcolheader=function(a){b.onclickcolheader?b.onclickcolheader(a):console.log("no se ha declarado la funcion onclickcolheader")},b.cambiaCheck=function(a,b){b.check.selectall=!1,a[b.prop]===b.check.valuecheck?a[b.prop]=b.check.valuenocheck:a[b.prop]=b.check.valuecheck},$("#clscroll-content-tra").scroll(function(){var a=document.getElementById("clscroll-column-headers-tra").style;
a.paddingRight="15px"})}}}angular.module("isyplus").directive("ngTablescrollv",a),a.$inject=["$filter","$anchorScroll","$location"]}(),function(a){function b(){function a(a,b,c){console.log("entra a link valor para attrs es:"),console.log(c)}function b(a){function b(){console.log("init controller-->",d.tituloss)}function c(){console.log("on attrib change-->")}var d=this;b(),d.onAttribChange=c,a.$watch("cntrl.tituloss",function(a,b){console.log("watch cntrl.titulo"),console.log("newValue,",a,b)}),a.$watch("cntrl.print",function(a,b){console.log("watch cntrl.print"),console.log("newValue,",a,b)}),a.$watch("cntrl.probj.text",function(a,b){console.log("watch cntrl.probj.text"),console.log("newValue,",a,b)})}return b.$inject=["$scope"],{restrict:"EA",replace:!0,templateUrl:"static/components/ui/rerender/rerender.html?v="+globalgsvapp,scope:!0,bindToController:{tituloss:"=",print:"=",probj:"="},link:a,controller:b,controllerAs:"cntrl"}}a.directive("serviRender",b)}(IsyplusApp),function(){function a(){function a(a,b,c){}function b(a,b,c,d,e){function f(){var c=moment();a.datetimepicker({format:"DD/MM/YYYY",defaultDate:c,showTodayButton:!0,locale:"es"}),a.on("dp.change",function(a){b(function(){try{var b=a.date.format("DD/MM/YYYY");h.model=b,g()}catch(c){h.model=""}})})}function g(){b(function(){try{c.$eval(d.onenter)}catch(a){console.error("Error en val $attrs.onenter"),console.error(a)}})}var h=this;h.onEnter=g,f()}return b.$inject=["$element","$timeout","$scope","$attrs","FechasServ"],{restrict:"EA",replace:!0,templateUrl:"static/components/ui/serviFecha/serviFecha.html?v="+globalgsvapp,link:a,scope:!0,bindToController:{model:"=",disabled:"=",required:"=",pattern:"=",classinput:"@",classinputgroup:"@",elementid:"@"},controller:b,controllerAs:"cntrl"}}angular.module("isyplus").directive("serviFecha",a)}(),function(){function a(){return{restrict:"A",link:function(a,b,c){b.focus(function(){try{$(this).select()}catch(a){console.log("Error en focus event select",a)}})}}}angular.module("isyplus").directive("serviFocusSelect",a)}(),function(a){function b(){return{restrict:"EA",replace:!0,templateUrl:"static/components/ui/serviMes/serviMes.html?v="+globalgsvapp,scope:!0,bindToController:{form:"=?",onchange:"&?",disabled:"=?",formProp:"@?",elementid:"@?"},controller:c,controllerAs:"cntrl"}}function c(a,b){function c(a){g.form[g.formProp]=a,e();try{g.onchange()}catch(b){console.error("Error->")}}function d(){return g.form[g.formProp]}function e(){var b=d()||1;g.labelMes=a.getMesLargo(b-1)}function f(){console.log("init servi-mes-->"),g.form&&(g.formProp||(g.formProp="mes"),e())}var g=this;g.labelMes="",g.setMes=c,f(),b.$watch("self.form",function(a,b){console.log("Watch self.form serviMes:",g.form),g.form&&f()})}a.directive("serviMes",b),c.$inject=["FechasServ","$scope"]}(IsyplusApp),function(){function a(){var a={restrict:"EA",transclude:!0,replace:!0,templateUrl:"static/components/ui/serviPageHeader/serviPageHeader.html?v="+globalgsvapp};return a}angular.module("isyplus").directive("serviPageHeader",a)}(),function(){function a(){var a={restrict:"EA",replace:!0,templateUrl:"static/components/ui/serviPanel/serviPanel.html?v="+globalgsvapp,transclude:{titleSlot:"?paneTitle",bodySlot:"?paneBody"},scope:!0,bindToController:{type:"@",showHeader:"@",showBody:"@"},controller:function(){angular.isUndefined(this.showHeader)&&(this.showHeader="true"),angular.isUndefined(this.showBody)&&(this.showBody="true")},controllerAs:"cntrl"};return a}angular.module("isyplus").directive("serviPane",a)}(),function(){function a(){return{restrict:"A",link:function(a,b,c){var d=a.$eval(c.tooltip),e={placement:"top",title:"definir"};for(var f in d)e[f]=d[f];$(b).tooltip(e),$(b).hover(function(){$(b).tooltip("show")},function(){$(b).tooltip("hide")}),$(b).click(function(){$(b).tooltip("hide")})}}}angular.module("isyplus").directive("tooltip",a)}();
//# sourceMappingURL=app.min.js.map